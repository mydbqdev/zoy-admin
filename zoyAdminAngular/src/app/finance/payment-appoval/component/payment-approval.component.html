<ngx-spinner bdColor="rgba(0,0,0,0.8)" size="medium" color="#fff" type="ball-circus" [fullScreen]="true">
  <p style="color: white;">Loading ...</p>
</ngx-spinner>
<div id="page-top">
    <!-- Page Wrapper -->
    <div id="wrapper">
      <!-- Sidebar -->
      <app-sidebar></app-sidebar>
      <!-- End of Sidebar -->

      <!-- Content Wrapper -->
      <div id="content-wrapper" class="d-flex flex-column" [ngClass]=" isExpandSideBar ?'side-bar-expand':'side-bar-collaspe'">
          <!-- Main Content -->
          <div id="content">
                <div style="display: block;margin-bottom: 5.375rem;">
                <!-- Topbar -->
                <app-header></app-header>
                <!-- End of Topbar -->
                </div>

              <!-- Begin Page Content -->
              <div class="container-fluid" style="margin-top: -5px;">
                  <div>
                  <div class="d-flex mb-1">
                    <h3 class="h3 mb-0"><span class="text-header-800 text-header-border">Owner Transaction</span><span class="text-header-800-blue">Approval</span></h3> 
                    <div class="ml-auto" >
                      
                    </div>
                  </div>
                  <div class="row mt-2 mb-0" style="padding:10px 10px 0px;">
                    <div style="border:1px solid#dbdbdb;border-radius: 5px;">
                    <form >                 
                      <div class="d-flex">
                        <div style="width: 160px;">
                          <div class="form-group">
                            <label for="category" class="col-form-label">City</label>
                            <select class="form-select" id="category">                                             
                              <option value="Bangalore">Bangalore</option>
                              <option value="Chennai">Chennai</option>
                            </select>
                          </div>
                          <div style="height: 30px;margin-top:-15px;"> 
                            
                          </div>
                        </div>
                        <div style="padding-left:10px;">
                          <div class="form-group">
                            <label for="fileName" class="col-form-label">OWNER ID/Name</label>
                            <input type="text" class="form-control" id="fileName" name="fileName"  autocomplete="off" />
                          </div>
                          <div style="height: 30px;margin-top:-15px;"> 
                            
                          </div>
                        </div>
                        <div style="width: 310px;padding-left:10px;">
                          <div class="form-group">                                             
                            <label for="category" class="col-form-label">Date Range</label>
                            <div class="d-flex gap-2">
                              <input type="date" class="form-control" style="width: 150px;" id="fromDate" /> - 
                              <input type="date" class="form-control" style="width: 150px;" id="toDate" />
                            </div>
                          </div>
                          <div style="height: 30px;margin-top:-15px;">  
                                                                        
                          </div>
                        </div>
                        <div style="width: 130px;padding-left:10px;">
                              <div class="form-group">
                                <label for="category" class="col-form-label">Status</label>
                                <select class="form-select" id="category">                                             
                                  <option value="Received">Received</option>
                                  <option value="Not Receive">Not Receive</option>
                                </select> 
                              </div>
                             <div style="height: 30px;margin-top:-15px;"> 
                            </div>
                        </div>                                                                
                        <div style="padding-top: 37px;width: 130px;padding-left:10px;">                                            
                              <button type="submit" class="btn btn-primary-custom">Show Results</button>
                        </div>
                        </div>
                    </form>
                    </div>
                  </div>
                  </div>
                  <div class="row mt-2">
                      <div class="col-xl-12 col-lg-12">
                          <div class="card shadow mb-3"> 
                            <div class="card-body" style="display: block;margin: 0px;padding: 2px;">
                                <div class="scrollable-container-main">
                                  <div>
                                    <table mat-table [dataSource]="dataSource" matSort  
                                      (matSortChange)="announceSortChange($event)" matSortActive="owner_id" matSortDirection="desc" >
                                      <!-- Zoy Code Column -->
                                      <ng-container matColumnDef="owner_id">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-weight: 600;"> OWNER ID
                                          <span style="margin-left: 2px;">
                                            <i class="fas fa-lg fa-sort-up sorting-normal-color" [ngClass]="{'sorting-selected-color': columnSortDirections['owner_id'] === 'asc' }"></i>
                                            <i class="fas fa-lg fa-sort-down sorting-normal-color" style="margin-left:-11px" [ngClass]="{'sorting-selected-color': columnSortDirections['owner_id'] === 'desc'}"></i>
                                          </span>
                                        </th>
                                        <td mat-cell *matCellDef="let element"> {{ element.owner_id }} </td>
                                      </ng-container>
  
                                      <!-- Owner Name Column -->
                                      <ng-container matColumnDef="owner_name">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-weight: 600;width: 200px;"> OWNER NAME 
                                          <span style="margin-left: 2px;">
                                            <i class="fas fa-lg fa-sort-up sorting-normal-color" [ngClass]="{'sorting-selected-color': columnSortDirections['owner_name'] === 'asc' }"></i>
                                            <i class="fas fa-lg fa-sort-down sorting-normal-color" style="margin-left:-11px" [ngClass]="{'sorting-selected-color': columnSortDirections['owner_name'] === 'desc'}"></i>
                                          </span>
                                        </th>
                                        <td mat-cell *matCellDef="let element" style="width: 200px;" > {{ element.owner_name }} </td>
                                      </ng-container>
  
                                      <!-- Email Column -->
                                      <ng-container matColumnDef="owner_share">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-weight: 600;"> OWNER SHARE
                                          <span style="margin-left: 2px;">
                                            <i class="fas fa-lg fa-sort-up sorting-normal-color" [ngClass]="{'sorting-selected-color': columnSortDirections['owner_share'] === 'asc' }"></i>
                                            <i class="fas fa-lg fa-sort-down sorting-normal-color" style="margin-left:-11px" [ngClass]="{'sorting-selected-color': columnSortDirections['owner_share'] === 'desc'}"></i>
                                          </span>
                                        </th>
                                        <td mat-cell *matCellDef="let element"><i class="fas fa-rupee-sign"  style="font-size: 12px; color: gray;"></i> {{ element.owner_share }} </td>
                                      </ng-container>

                                      <ng-container matColumnDef="status">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-weight: 600;" matTooltip="TRANSACTION STATUS">STATUS
                                          <span style="margin-left: 2px;">
                                            <i class="fas fa-lg fa-sort-up sorting-normal-color" [ngClass]="{'sorting-selected-color': columnSortDirections['status'] === 'asc' }"></i>
                                            <i class="fas fa-lg fa-sort-down sorting-normal-color" style="margin-left:-11px" [ngClass]="{'sorting-selected-color': columnSortDirections['status'] === 'desc'}"></i>
                                          </span>
                                        </th>
                                        <td mat-cell *matCellDef="let element" style="padding: 4px;">
                                          <span
                                            class="common-status"
                                            [ngClass]="{
                                              'btn-pending': element.status === 'Pending',
                                              'btn-registered': element.status === 'Success',
                                              'btn-processing': element.status === 'Processing',
                                              'btn-failed': element.status === 'Failed'
                                            }">
                                            <span *ngIf="element.status === 'Pending'">Pending</span>
                                            <span *ngIf="element.status === 'Success'"><i class="fa fa-check"></i><span class="ms-2">Success</span></span>
                                            <span *ngIf="element.status === 'Processing'">Processing</span>
                                            <span *ngIf="element.status === 'Failed'"><i class="fa fa-times"></i><span class="ms-2">Failed</span></span>
                                          </span>
                                        </td>
                                      </ng-container>
  
                                      <!-- Contact Column -->
                                      <ng-container matColumnDef="zoy_share">
                                        <th mat-header-cell *matHeaderCellDef  mat-sort-header style="font-weight: 600;">ZOY SHARE
                                          <span style="margin-left: 2px;">
                                            <i class="fas fa-lg fa-sort-up sorting-normal-color" [ngClass]="{'sorting-selected-color': columnSortDirections['zoy_share'] === 'asc' }"></i>
                                            <i class="fas fa-lg fa-sort-down sorting-normal-color" style="margin-left:-11px" [ngClass]="{'sorting-selected-color': columnSortDirections['zoy_share'] === 'desc'}"></i>
                                          </span></th>
                                        <td mat-cell *matCellDef="let element"><i class="fas fa-rupee-sign" style="font-size: 12px; color: gray;"></i> {{ element.zoy_share }} </td>
                                      </ng-container>
  
                                      <!-- Status Column with Conditional Button Styling -->
                                      <ng-container matColumnDef="acknowledgment">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="font-weight: 600;" matTooltip="ACKNOWLEDGMENT FROM OWNER ">ACKNOWLEDGMENT 
                                          <span style="margin-left: 2px;">
                                            <i class="fas fa-lg fa-sort-up sorting-normal-color" [ngClass]="{'sorting-selected-color': columnSortDirections['acknowledgment'] === 'asc' }"></i>
                                            <i class="fas fa-lg fa-sort-down sorting-normal-color" style="margin-left:-11px" [ngClass]="{'sorting-selected-color': columnSortDirections['acknowledgment'] === 'desc'}"></i>
                                          </span>
                                        </th>
                                        <td mat-cell *matCellDef="let element" style="padding: 4px;" >
                                          <span class="common-status" [ngClass]="{'btn-pending': element.acknowledgment === 'Pending','btn-registered': element.acknowledgment === 'Received', 'btn-failed': element.acknowledgment === 'Not Received'}">
                                            <span *ngIf="element.acknowledgment === 'Pending'">Pending</span>
                                            <span *ngIf="element.acknowledgment === 'Received'">Received</span>
                                            <span *ngIf="element.acknowledgment === 'Not Received'">Not Received</span>
                                          </span>
                                        </td>
                                      </ng-container>
                                      <ng-container matColumnDef="action">
                                        <th mat-header-cell *matHeaderCellDef style="width: 50px;"> </th>
                                        <td mat-cell *matCellDef="let element" style="width: 50px;" data-bs-toggle="modal" data-bs-target="#paymentRowSelectionkdrop">
                                                  <a class="dropdown no-arrow dropdown-toggle" href="javascript:void(0)" role="button" id="dropdownMenuLink"
                                                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                       <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                                   </a>
                                                   <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                                       aria-labelledby="dropdownMenuLink">
                                                       <a class="dropdown-item" href="javascript:void(0)" ><i class="far fa-eye"></i> Details</a>
                                                       <a class="dropdown-item" href="javascript:void(0)" ><i class="far fa-eye"></i> Document List</a>
                                                       <a class="dropdown-item" href="javascript:void(0)" ><i class="far fa-eye"></i> Other Action</a>
                                                   </div>
                                        </td>
                                      </ng-container>
                                      <!-- Header Row -->
                                      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"></tr>
                                      <!-- Data Row -->
                                      <tr mat-row *matRowDef="let row; columns: displayedColumns;"(click)="openModal(row)" data-bs-toggle="modal" data-bs-target="#paymentRowSelectionkdrop"></tr>
                                    </table>
                                  
                                  <div style="text-align: center; min-height: 45px; padding-top: 10px;" *ngIf="dataSource.data.length === 0">
                                    No records found
                                  </div>
                                </div>
                              </div>
                            
                              <!-- Pagination -->
                              <mat-paginator #paginator [length]="dataSource.data.length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions" showFirstLastButtons></mat-paginator>
                            </div>
                            
                              
                          </div>
                      </div>
                  </div>
              </div>
              <!-- /.container-fluid -->

          </div>
          <!-- End of Main Content -->

      </div>
      <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->
</div>


<!------To view Row details PopUp model------->
<div class="modal fade" id="paymentRowSelectionkdrop" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true" data-bs-backdrop="static">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalLabel">Payment Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="container">
          <div class="row mb-2">
            <div class="col-4 fw-bold text-start">Owner ID</div>
            <div class="col-2 text-enter">:</div>
            <div class="col-6">{{ selectedRow?.owner_id }}</div>
          </div>
          <div class="row mb-2">
            <div class="col-4 fw-bold text-start">Owner Name</div>
            <div class="col-2 text-enter">:</div>
            <div class="col-6">{{ selectedRow?.owner_name }}</div>
          </div>
          <div class="row mb-2">
            <div class="col-4 fw-bold text-start">Owner Share</div>
            <div class="col-2 text-enter">:</div>
            <div class="col-6">{{ selectedRow?.owner_share }}</div>
          </div>
          <div class="row mb-2">
            <div class="col-4 fw-bold text-start">Status</div>
            <div class="col-2 text-enter">:</div>
            <div class="col-6">{{ selectedRow?.status }}</div>
          </div>
          <div class="row mb-2">
            <div class="col-4 fw-bold text-start">Zoy Share</div>
            <div class="col-2 text-enter">:</div>
            <div class="col-6">{{ selectedRow?.zoy_share }}</div>
          </div>
          <div class="row mb-2">
            <div class="col-4 fw-bold text-start">Acknowledgment</div>
            <div class="col-2 text-enter">:</div>
            <div class="col-6">{{ selectedRow?.acknowledgment }}</div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary-custom" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>