<ngx-spinner bdColor="rgba(0,0,0,0.8)" size="medium" color="#fff" type="custom" [fullScreen]="true">
  <div class="spinner-container"><img class="spinner-home-logo" src="assets/images/home-logo.png" alt="Home"/>
    <img class="spinner-location-logo" src="assets/images/location-logo.png" alt="User"/>
    <div class="spinner-loading">Loading</div>
  </div>
</ngx-spinner>
<div id="page-top">
    <!-- Page Wrapper -->
    <div id="wrapper">    
      <!-- Sidebar -->
        <app-sidebar></app-sidebar>
      <!-- End of Sidebar -->

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column" [ngClass]=" isExpandSideBar ?'side-bar-expand':'side-bar-collaspe'">
            <!-- Main Content -->
            <div id="content">
                <div style="display: block;margin-bottom: 5.375rem;">
                <!-- Topbar -->
                <app-header></app-header>
                <!-- End of Topbar -->
                </div>

                <!-- Begin Page Content -->
                <div class="container-fluid">
                  <div class="d-sm-flex align-items-center justify-content-between mb-0">
                    <h3 class="h3 mb-0">
                      <span class="text-header-800 text-header-border">Master</span><span class="text-header-800-blue">Configuration</span></h3> 
                  </div>
                   <!--
                  <div class="d-flex align-items-center justify-content-between w-100" style="display: block;margin: 0px;padding: 2px;">
                    <div class="input-group w-100">
                      <button type="button" class="form-control btn btn-primary">Advances</button>
                      <button type="button" class="form-control">Security Deposit Limits</button>
                      <button type="button" class="form-control">Cancellation Rules</button>
                      <button type="button" class="form-control">Security Deposit Refund Rules</button>
                      <button type="button" class="form-control">Other Charges</button>
                      <button type="button" class="form-control">Data Grouping</button>-->
                      <!--button type="button" class="form-control">Promotion and Offers</button -->
                  <!--  </div>
                    <i class="fas fa-chevron-right ms-2"></i>
                  </div>
                -->               
                  <div class="card-body mt-3 mb-3" style="padding:0px !important;">
                   <div class="card">
                      <div>
                          <!--Total Advance section-->
                          <div class="p-3">
                            <div>
                              <div><span style="font-size: 16px;color:#78177e;">Token Advance</span></div>
                              <div>
                                <p class="small text-muted" style="font-size: 12px;">
                                  <em>Token Advance amount will be calculated between the Fixed amount and variable percentage whichever is higher.
                                  </em>
                                </p>
                              </div>
                            </div>
                            
                            <div>
                              <div class="row" >
                                <div class="col-sm-4">
                                  <div>Fixed amount</div>
                                  <div class="input-group input-group-sm">
                                    <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                    <input 
                                      type="text" 
                                      class="form-control form-control-sm" 
                                      [(ngModel)]="editConfigMaster.tokenDetails.fixedToken" [disabled]="tokenAdvancDisabled" (keypress)="numberOnly($event)" maxlength="7"
                                       [ngClass]="{'is-invalid': !tokenAdvancDisabled && isNotValidNumber(editConfigMaster.tokenDetails.fixedToken) }" 
                                      style="max-width: 90px !important;" />
                                  </div>
                                  <p class="small text-muted " style="font-size: 12px;">
                                    <em>Fixed amount of the token advance required during booking.</em>
                                  </p>
                                </div>
                                <div class="col-sm-4">
                                  <div>% of Security Deposit</div>
                                      <div class="input-group input-group-sm" >
                                        <input 
                                          type="text" 
                                          class="form-control form-control-sm" 
                                          [(ngModel)]="editConfigMaster.tokenDetails.variableToken"  (keypress)="percentageOnly($event)" maxlength="5"
                                          [ngClass]="{'is-invalid': !tokenAdvancDisabled && isNotValidNumber(editConfigMaster.tokenDetails?.variableToken)}" 
                                          style="max-width: 70px !important;" [disabled]="tokenAdvancDisabled" />
                                         <span class="input-group-text">%</span>
                                  </div>
                                  <p class="small text-muted " style="font-size: 12px;"><em>Percentage of security deposit required as the token advance during booking.</em></p>
                      
                                </div>
                                <div class="col-sm-2">
                                  <div>Effective On</div>
                                  <div class="input-group input-group-sm">
                                    <input 
                                      type="date" 
                                      class="form-control form-control-sm" [(ngModel)]="editConfigMaster.tokenDetails.effectiveDate" [disabled]="tokenAdvancDisabled"
                                      [ngClass]="{'is-invalid': !tokenAdvancDisabled && (!editConfigMaster.tokenDetails?.effectiveDate || invaliedEffectiveDate('tokenDetails',this.editConfigMaster.tokenDetails?.effectiveDate ) )}" 
                                      />
                                  </div>
                               </div>
                                <div class="col-sm-2 mt-4" >
                                  <div class="d-flex">
                                  <div><i class="fas fa-thumbs-up mr-2 mt-1" [ngClass]="editConfigMaster.tokenDetails?.isApproved ? 'color-bg-green':'color-bg-gray'"></i></div>
                                  <div *ngIf=" tokenAdvancDisabled && !editConfigMaster.tokenDetails?.isApproved && !editConfigMaster.tokenDetails?.comments && rolesArray.includes('CONFIGURATION_MASTER_APPROVAL_WRITE')" title="Click here to Approve or Reject" >
                                    <a class="approve-icon"
                                       data-bs-toggle="modal" data-bs-target="#approveRejectModel" (click)="openApproveOrRejectModel('tokenDetails',editConfigMaster.tokenDetails)">
                                      <i class="far fa-hand-point-up mt-1 mr-2"></i>
                                    </a>
                                  </div>
                                  <div *ngIf="editConfigMaster.tokenDetails?.isApproved" >
                                    <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Token Advance'" >
                                      <i class="fas fa-chevron-circle-down  mr-1"></i></a></div>

                                    <div *ngIf="tokenAdvancDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')" class="btn-group">
                                      <button class="btn btn-sm btn-outline-secondary" (click)="tokenAdvancDisabled = false">
                                        <i class="fas fa-edit"></i>
                                      </button>
                                    </div>
                                    <div class="btn-group" *ngIf="!tokenAdvancDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                      <button class="btn btn-sm btn-outline-secondary" (click)="tokenAdvancSubmit('update')">
                                        <i class="fas fa-check"></i>
                                      </button>
                                      <button class="btn btn-sm btn-outline-secondary" (click)="tokenAdvanceReset()">
                                        <i class="fas fa-redo" style="color: red;"></i>
                                      </button>
                                    </div>
                                    </div>
                                </div>
                              </div>
                              <div class="row" *ngIf="showConfigMaster.tokenDetails!=null">
                                <div class="col-sm-4">
                                  <div class="input-group input-group-sm">
                                    <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                    <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 90px !important;">
                                      {{ showConfigMaster.tokenDetails.fixedToken }}
                                    </span>
                                    <!-- <input 
                                      type="text" 
                                      class="form-control form-control-sm" 
                                      [(ngModel)]="showConfigMaster.tokenDetails.fixedToken" disabled 
                                      style="max-width: 90px !important;" /> -->
                                  </div>
                                </div>
                                <div class="col-sm-4">
                                      <div class="input-group input-group-sm" >
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 70px !important;">
                                          {{ showConfigMaster.tokenDetails.variableToken }}
                                        </span>
                                        <!-- <input 
                                          type="text" 
                                          class="form-control form-control-sm" 
                                          [(ngModel)]="showConfigMaster.tokenDetails.variableToken"  style="max-width: 70px !important;" disabled /> -->
                                         <span class="input-group-text">%</span>
                                  </div>
                                  
                                </div>
                                <div class="col-sm-2">
                                  <div class="input-group input-group-sm">
                                    <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                      {{ showConfigMaster.tokenDetails.effectiveDate }}
                                    </span>
                                    <!-- <input 
                                      type="date" 
                                      class="form-control form-control-sm" [ngModel]="showConfigMaster.tokenDetails.effectiveDate " disabled/> -->
                                  </div>
                               </div>
                                <div class="col-sm-2 mt-1" >
                                  <div class="d-flex">
                                  <div><i class="fas fa-thumbs-up mr-2 mt-1 color-bg-green"></i></div>
                                  <!-- <div *ngIf="configMasterOrg.tokenDetails.length>1 && configMasterOrg.tokenDetails[0]?.isApproved"> -->
                                  <div>
                                    <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Token Advance'" ><i class="fas fa-chevron-circle-down mt-1"></i></a></div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <hr class="solid"> 
                        <div>
                          <!--Security Deposit Limits-->
                          <div class="p-3">
                            <div>
                              <div><span style="font-size: 16px;color:#78177e;">Security Deposit Limits</span></div>
                              <div>
                                <p class="small text-muted " style="font-size: 12px;">
                                <em>Configure the minimum and maximum security deposit limits that owners are allowed to collect from tenants.</em>
                                </p>
                              </div>
                            </div>
                            <div>
                              <div class="row" *ngIf="editConfigMaster.depositDetails">
                                <!-- Minimum Security Deposit -->
                                <div class="col-sm-4">
                                  <div>Minimum Security Deposit</div>
                                  <div class="input-group input-group-sm">
                                    <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                    <input 
                                      type="text" 
                                      class="form-control form-control-sm"
                                      [(ngModel)]="editConfigMaster.depositDetails.minimumDeposit" [disabled]="securityDepositLimitsDisabled" (keypress)="numberOnly($event)" maxlength="7"
                                       [ngClass]="{'is-invalid': !securityDepositLimitsDisabled && isNotValidNumber(editConfigMaster.depositDetails?.minimumDeposit) }" 
                                      style="max-width: 140px !important;" />
                                  </div>
                                  <p class="small text-muted" style="font-size: 12px;">
                                  <em>Set the minimum allowed deposit amount.</em>
                                  </p>
                                </div>
                                <!-- Maximum Security Deposit -->
                                <div class="col-sm-4">
                                  <div>Maximum Security Deposit</div>
                                  <div class="input-group input-group-sm">
                                    <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                    <input 
                                      type="text" 
                                      class="form-control form-control-sm"
                                      [(ngModel)]="editConfigMaster.depositDetails.maximumDeposit" [disabled]="securityDepositLimitsDisabled" (keypress)="numberOnly($event)" maxlength="7"
                                       [ngClass]="{'is-invalid': !securityDepositLimitsDisabled && isNotValidNumber(editConfigMaster.depositDetails?.maximumDeposit)}" 
                                      style="max-width: 140px !important;"/>
                                  </div>
                                  <p class="small text-muted" style="font-size: 12px;">
                                  <em>Set the maximum allowed deposit amount.</em>
                                  </p>
                                </div>
                                <div class="col-sm-2">
                                  <div>Effective On</div>
                                  <div class="input-group input-group-sm">
                                    <input 
                                      type="date" 
                                      class="form-control form-control-sm" [(ngModel)]="editConfigMaster.depositDetails.effectiveDate"  [disabled]="securityDepositLimitsDisabled"
                                      [ngClass]="{'is-invalid': !securityDepositLimitsDisabled && (!editConfigMaster.depositDetails?.effectiveDate || invaliedEffectiveDate('depositDetails',editConfigMaster.depositDetails?.effectiveDate ) )}" />
                                  </div>
                               </div>
                                <!-- Action Button -->
                                <div class="col-sm-2 mt-4"  >
                                  <div class="d-flex">
                                  <div><i class="fas fa-thumbs-up mr-2 mt-1" [ngClass]="editConfigMaster.depositDetails?.isApproved?'color-bg-green':'color-bg-gray'"></i></div>
                                  <!-- <div *ngIf="configMasterOrg.depositDetails.length>1 && configMasterOrg.depositDetails[0]?.isApproved"> -->
                                    <div *ngIf=" securityDepositLimitsDisabled && !editConfigMaster.depositDetails?.isApproved && rolesArray.includes('CONFIGURATION_MASTER_APPROVAL_WRITE')" title="Click here to Approve or Reject" >
                                      <a class="approve-icon" 
                                         data-bs-toggle="modal" data-bs-target="#approveRejectModel" (click)="openApproveOrRejectModel('depositDetails',editConfigMaster.depositDetails)">
                                        <i class="far fa-hand-point-up mt-1 mr-2"></i>
                                      </a>
                                    </div>
                                  <div *ngIf="editConfigMaster.depositDetails?.isApproved">
                                    <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Security Deposit Limits'"  >
                                      <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>

                                  <div class="btn-group" *ngIf="rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                    <button 
                                      class="btn btn-sm btn-outline-secondary" 
                                      *ngIf="securityDepositLimitsDisabled"
                                      (click)="securityDepositLimitsDisabled = false">
                                      <i class="fas fa-edit"></i>
                                    </button>
                                    <button 
                                      class="btn btn-sm btn-outline-secondary" 
                                      *ngIf="!securityDepositLimitsDisabled"
                                      (click)="securityDepositLimitsSubmit('update')">
                                      <i class="fas fa-check"></i>
                                    </button>
                                    <button 
                                      class="btn btn-sm btn-outline-secondary" 
                                      *ngIf="!securityDepositLimitsDisabled"
                                      (click)="securityDepositLimitsReset()">
                                      <i class="fas fa-redo" style="color: red;"></i>
                                    </button>
                                  </div>
                                  </div>
                                </div>
                              </div>

                              <div class="row" *ngIf="showConfigMaster.depositDetails">
                                <!-- Minimum Security Deposit -->
                                <div class="col-sm-4">
                                  <div class="input-group input-group-sm">
                                    <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                    <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 140px !important;">
                                      {{ showConfigMaster.depositDetails.minimumDeposit }}
                                    </span>
                                    <!-- <input 
                                      type="text" 
                                      class="form-control form-control-sm"
                                      [(ngModel)]="showConfigMaster.depositDetails.minimumDeposit"  disabled style="max-width: 140px !important;" /> -->
                                  </div>
                                </div>
                                <!-- Maximum Security Deposit -->
                                <div class="col-sm-4">
                                  <div class="input-group input-group-sm">
                                    <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                    <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 140px !important;">
                                      {{ showConfigMaster.depositDetails.maximumDeposit }}
                                    </span>
                                    <!-- <input 
                                      type="text" 
                                      class="form-control form-control-sm"
                                      [(ngModel)]="showConfigMaster.depositDetails.maximumDeposit"  disabled style="max-width: 140px !important;"/> -->
                                  </div>
                                </div>
                                <div class="col-sm-2">
                                  <div class="input-group input-group-sm">
                                    <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                      {{ showConfigMaster.depositDetails.effectiveDate }}
                                    </span>
                                    <!-- <input 
                                      type="date" 
                                      class="form-control form-control-sm" [ngModel]="showConfigMaster.depositDetails.effectiveDate " disabled/> -->
                                  </div>
                               </div>
                                <!-- Action Button -->
                                <div class="col-sm-2 mt-1"  >
                                  <div class="d-flex">
                                  <div><i class="fas fa-thumbs-up mr-2 mt-1 color-bg-green"></i></div>
                                  <div>
                                    <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Security Deposit Limits'" >
                                      <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <hr class="solid"> 
                        <div>
                          <!--Total Advance section-->
                          <div class="p-3">
                            <div>
                              <div><span style="font-size: 16px;color:#78177e;">GST Charges</span></div>
                              <div><p class="small text-muted " style="font-size: 12px;"><em>Specify the GST percentage to be applied on rent.</em></p></div>
                            </div>
                            
                            <div>
                              <div class="row"  *ngIf="editConfigMaster.gstCharges">
                                <div class="col-sm-10">
                                <div class="row">
                                <div class="col-sm-3">
                                  <div>Monthly Rent</div>
                                  <div class="input-group input-group-sm">
                                    <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                    <input 
                                      type="text" 
                                      class="form-control form-control-sm" 
                                      [(ngModel)]="editConfigMaster.gstCharges.monthlyRent" [disabled]="gstChargesDisabled" (keypress)="numberOnly($event)" maxlength="7"
                                       [ngClass]="{'is-invalid': !gstChargesDisabled && isNotValidNumber(editConfigMaster.gstCharges?.monthlyRent) }" 
                                      style="max-width: 90px !important;" />
                                  </div>
                                  <p class="small text-muted " style="font-size: 12px;">
                                    <em>Monthly rent value for calculating GST.</em>
                                  </p>
                                </div>
                                <div class="col-sm-3">
                                  <div>CGST</div>
                                      <div class="input-group input-group-sm" >
                                        <input 
                                          type="text" 
                                          class="form-control form-control-sm" 
                                          [(ngModel)]="editConfigMaster.gstCharges.cgstPercentage"  (keypress)="percentageOnly($event)" maxlength="5"
                                          [ngClass]="{'is-invalid': !gstChargesDisabled && isNotValidNumber(editConfigMaster.gstCharges?.cgstPercentage) }" 
                                          style="max-width: 70px !important;" [disabled]="gstChargesDisabled" />
                                         <span class="input-group-text">%</span>
                                  </div>
                                  <p class="small text-muted " style="font-size: 12px;"><em>Set the Central Goods and Services Tax percentage. </em></p>
                      
                                </div>
                                <div class="col-sm-2">
                                  <div>SGST</div>
                                      <div class="input-group input-group-sm" >
                                        <input 
                                          type="text" 
                                          class="form-control form-control-sm" 
                                          [(ngModel)]="editConfigMaster.gstCharges.sgstPercentage"  (keypress)="percentageOnly($event)" maxlength="5"
                                          [ngClass]="{'is-invalid': !gstChargesDisabled && isNotValidNumber(editConfigMaster.gstCharges?.sgstPercentage) }" 
                                          style="max-width: 70px !important;" [disabled]="gstChargesDisabled" />
                                         <span class="input-group-text">%</span>
                                  </div>
                                  <p class="small text-muted " style="font-size: 12px;"><em>Set the State Goods and Services Tax percentage.</em></p>
                      
                                </div>
                                <div class="col-sm-2">
                                  <div>IGST</div>
                                      <div class="input-group input-group-sm" >
                                        <input 
                                          type="text" 
                                          class="form-control form-control-sm" 
                                          [(ngModel)]="editConfigMaster.gstCharges.igstPercentage"  (keypress)="percentageOnly($event)" maxlength="5"
                                          [ngClass]="{'is-invalid': !gstChargesDisabled && isNotValidNumber(editConfigMaster.gstCharges?.igstPercentage) }" 
                                          style="max-width: 70px !important;" [disabled]="gstChargesDisabled" />
                                         <span class="input-group-text">%</span>
                                  </div>
                                  <p class="small text-muted " style="font-size: 12px;"><em>Set the Integrated Goods and Services Tax percentage. </em></p>
                      
                                </div>
                                <div class="col-sm-2">
                                  <div>Effective On</div>
                                  <div class="input-group input-group-sm">
                                    <input 
                                      type="date" 
                                      class="form-control form-control-sm" [(ngModel)]="editConfigMaster.gstCharges.effectiveDate" [disabled]="gstChargesDisabled"
                                      [ngClass]="{'is-invalid': !gstChargesDisabled && (!editConfigMaster.gstCharges?.effectiveDate || invaliedEffectiveDate('gstCharges',editConfigMaster.gstCharges?.effectiveDate ) )}" 
                                      />
                                  </div>
                               </div>
                              </div>
                              </div>
                                <div class="col-sm-1 mt-4" >
                                  <div class="d-flex">
                                  <div><i class="fas fa-thumbs-up mr-2" [ngClass]="editConfigMaster.gstCharges.isApproved?'color-bg-green':'color-bg-gray'"></i></div>
                                  <div *ngIf="editConfigMaster.gstCharges.isApproved">
                                    <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='GST Charges'" >
                                      <i class="fas fa-chevron-circle-down mr-2"></i></a></div>
                                      <div *ngIf=" gstChargesDisabled && !editConfigMaster.gstCharges?.isApproved && rolesArray.includes('CONFIGURATION_MASTER_APPROVAL_WRITE')" title="Click here to Approve or Reject" >
                                        <a class="approve-icon" data-bs-toggle="modal" data-bs-target="#approveRejectModel" (click)="openApproveOrRejectModel('gstCharges',editConfigMaster.gstCharges)">
                                          <i class="far fa-hand-point-up mt-1 mr-2"></i>
                                        </a>
                                      </div>
                                    <div *ngIf="gstChargesDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                      <button class="btn btn-sm btn-outline-secondary" (click)="gstChargesDisabled = false">
                                        <i class="fas fa-edit"></i>
                                      </button>
                                    </div>
                                    <div class="btn-group" *ngIf="!gstChargesDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                      <button class="btn btn-sm btn-outline-secondary" (click)="gstChargesSubmit('update')">
                                        <i class="fas fa-check"></i>
                                      </button>
                                      <button class="btn btn-sm btn-outline-secondary" (click)="gstChargesReset()">
                                        <i class="fas fa-redo" style="color: red;"></i>
                                      </button>
                                    </div>
                                    </div>
                                </div>
                              </div>

                              <div class="row" *ngIf="showConfigMaster.gstCharges">
                                <div class="col-sm-10">
                                <div class="row">
                                <div class="col-sm-3">
                                  <div class="input-group input-group-sm">
                                    <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                    <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 90px !important;">
                                      {{ showConfigMaster.gstCharges.monthlyRent }}
                                    </span>
                                    <!-- <input 
                                      type="text" 
                                      class="form-control form-control-sm" 
                                      [(ngModel)]="showConfigMaster.gstCharges.monthlyRent" disabled
                                      style="max-width: 90px !important;" /> -->
                                  </div>
                                </div>
                                <div class="col-sm-3">
                                      <div class="input-group input-group-sm" >
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 70px !important;">
                                          {{ showConfigMaster.gstCharges.cgstPercentage }}
                                        </span>
                                        <!-- <input 
                                          type="text" 
                                          class="form-control form-control-sm" 
                                          [(ngModel)]="showConfigMaster.gstCharges.cgstPercentage" disabled style="max-width: 70px !important;"  /> -->
                                         <span class="input-group-text">%</span>
                                  </div>
                                </div>
                                <div class="col-sm-2">
                                      <div class="input-group input-group-sm" >
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 70px !important;">
                                          {{ showConfigMaster.gstCharges.sgstPercentage }}
                                        </span>
                                        <!-- <input 
                                          type="text" 
                                          class="form-control form-control-sm" 
                                          [(ngModel)]="editConfigMaster.gstCharges.sgstPercentage" disabled 
                                          style="max-width: 70px !important;" /> -->
                                         <span class="input-group-text">%</span>
                                  </div>
                                </div>
                                <div class="col-sm-2">
                                      <div class="input-group input-group-sm" >
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 70px !important;">
                                          {{ showConfigMaster.gstCharges.igstPercentage }}
                                        </span>
                                        <!-- <input 
                                          type="text" 
                                          class="form-control form-control-sm" 
                                          [(ngModel)]="showConfigMaster.gstCharges.igstPercentage"  
                                          style="max-width: 70px !important;" disabled /> -->
                                         <span class="input-group-text">%</span>
                                  </div>
                                  
                                </div>
                                <div class="col-sm-2">
                                  <div class="input-group input-group-sm">
                                    <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                      {{ showConfigMaster.gstCharges.effectiveDate }}
                                    </span>
                                    <!-- <input 
                                      type="text" 
                                      class="form-control form-control-sm" [ngModel]="showConfigMaster.gstCharges.effectiveDate | date:'dd-MM-yyyy'" disabled/> -->
                                  </div>
                               </div>
                              </div>
                              </div>
                                <div class="col-sm-1 mt-1" >
                                  <div class="d-flex">
                                  <div><i class="fas fa-thumbs-up mr-2 mt-1 color-bg-green"></i></div>
                                  <div>
                                    <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='GST Charges'" >
                                      <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <hr class="solid">
                        <!--Other Charges-->
                        <div>
                             <div class="p-3">
                              <div  style="align-items: baseline !important;">
                                <span style="font-size: 16px;color:#78177e;">Other Charges</span>
                                <p class="small text-muted" style="font-size: 12px;">
                                  <em>Configure eKYC and documentation charges for Owners and Tenants.</em>
                                </p>
                              </div>
                            <div class="ml-2">
                              <div class="row mr-2">
                                <div class="col-sm-4 mr-3" style="text-align: center;border-bottom:1px solid gray ;">eKYC Charges</div>
                                <div class="col-sm-4" style="text-align: center;border-bottom:1px solid gray ;">Documentation Charges </div>
                              </div>
                              <div class="row mb-2">
                                <div class="col-sm-2">
                                  <div style="text-align: left;">For Owners</div>
                                </div>
                                <div class="col-sm-2">
                                  <div style="text-align: left;">For Tenants</div>
                                </div>
                                <div class="col-sm-2">
                                    <div style="text-align: left;">For Owners</div>
                                </div>
                                <div class="col-sm-2">
                                    <div style="text-align: left;">For Tenants</div>
                                </div>
                                <div class="col-sm-2">
                                  <div style="text-align: left;">Effective On</div>
                                </div>
                              </div>
                            
                               <div class="row" *ngIf="editConfigMaster.otherCharges">
                                  <div class="col-sm-2">
                                    <div class="input-group input-group-sm">
                                      <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                      <input
                                        type="text"
                                        id="ownerEkycCharges"
                                        class="form-control form-control-sm"
                                        (keypress)="numberOnly($event)"
                                        maxlength="7"  style="max-width: 100px !important;" 
                                        [(ngModel)]="editConfigMaster.otherCharges.ownerEkycCharges"
                                        [ngClass]="{'is-invalid': !otherChargesDisabled && isNotValidNumber(editConfigMaster.otherCharges?.ownerEkycCharges)}"
                                        [disabled]="otherChargesDisabled"
                                    />
                                    </div>
                                  </div>
                                  <div class="col-sm-2">
                                    <div class="input-group input-group-sm">
                                      <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                      <input
                                          type="text"
                                          id="tenantEkycCharges"
                                          class="form-control form-control-sm"
                                          (keypress)="numberOnly($event)"
                                          maxlength="7"  style="max-width: 100px !important;" 
                                          [(ngModel)]="editConfigMaster.otherCharges.tenantEkycCharges"
                                          [ngClass]="{'is-invalid': !otherChargesDisabled && isNotValidNumber(editConfigMaster.otherCharges?.tenantEkycCharges) }"
                                          [disabled]="otherChargesDisabled"
                                        />
                                    </div>
                                  </div>
                                  <div class="col-sm-2 ml-2">
                                    <div class="input-group input-group-sm">
                                      <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                      <input
                                          type="text"
                                          id="ownerDocumentCharges"
                                          class="form-control form-control-sm"
                                          (keypress)="numberOnly($event)"
                                          maxlength="7"  style="max-width: 100px !important;" 
                                          [(ngModel)]="editConfigMaster.otherCharges.ownerDocumentCharges"
                                          [ngClass]="{'is-invalid': !otherChargesDisabled && isNotValidNumber(editConfigMaster.otherCharges?.ownerDocumentCharges)}"
                                          [disabled]="otherChargesDisabled"
                                        />
                                    </div>
                                  </div>
                                  <div class="col-sm-2">
                                    <div class="input-group input-group-sm">
                                      <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                      <input
                                        type="text"
                                        id="tenantDocumentCharges"
                                        class="form-control form-control-sm"
                                        (keypress)="numberOnly($event)"
                                        maxlength="7"  style="max-width: 100px !important;" 
                                        [(ngModel)]="editConfigMaster.otherCharges.tenantDocumentCharges"
                                        [ngClass]="{'is-invalid': !otherChargesDisabled && isNotValidNumber(editConfigMaster.otherCharges?.tenantDocumentCharges) }"
                                        [disabled]="otherChargesDisabled"
                                      />
                                    </div>
                                  </div>
                            
                                  <div class="col-sm-2">
                                    <div class="input-group input-group-sm">
                                      <input 
                                        type="date" 
                                        class="form-control form-control-sm" [(ngModel)]="editConfigMaster.otherCharges.effectiveDate" [disabled]="otherChargesDisabled"
                                        [ngClass]="{'is-invalid': !otherChargesDisabled && (!editConfigMaster.otherCharges?.effectiveDate || invaliedEffectiveDate('otherCharges',editConfigMaster.otherCharges?.effectiveDate ) )}" 
                                        />
                                    </div>
                                  </div>
                                  <div class="col-sm-1">
                                    <div class="d-flex">
                                      <div><i class="fas fa-thumbs-up mr-2" [ngClass]="editConfigMaster.otherCharges?.isApproved?'color-bg-green':'color-bg-gray'"></i></div>
                                      <div *ngIf="editConfigMaster.otherCharges?.isApproved ">
                                        <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Service Charges'" >
                                          <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a>
                                        </div>
                                          <div *ngIf=" otherChargesDisabled && !editConfigMaster.otherCharges?.isApproved && rolesArray.includes('CONFIGURATION_MASTER_APPROVAL_WRITE')" title="Click here to Approve or Reject" >
                                            <a class="approve-icon" data-bs-toggle="modal" data-bs-target="#approveRejectModel" (click)="openApproveOrRejectModel('otherCharges',editConfigMaster.otherCharges)">
                                              <i class="far fa-hand-point-up mt-1 mr-2"></i>
                                            </a>
                                          </div>      
                                    <div *ngIf="otherChargesDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                      <button class="btn btn-sm btn-outline-secondary" (click)="otherChargesDisabled = false">
                                        <i class="fas fa-edit"></i>
                                      </button>
                                    </div>
                                    <div class="btn-group" *ngIf="!otherChargesDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                      <button class="btn btn-sm btn-outline-secondary" (click)="otherChargesSubmit('update')">
                                        <i class="fas fa-check"></i>
                                      </button>
                                      <button class="btn btn-sm btn-outline-secondary" (click)="otherChargesReset()">
                                        <i class="fas fa-redo" style="color: red;"></i>
                                      </button>
                                    </div>
                                    </div>
                                  </div> 
                                </div> 
                                <div class="row">
                                  <div class="col-sm-4">
                                    <p class="small text-muted mt-1" style="font-size: 12px;">
                                      <em>Enter the one-time amount to be charged to Owners and Tenants for eKYC.</em>
                                    </p>
                                  </div>
                                  <div class="col-sm-4">
                                    <p class="small text-muted mt-1" style="font-size: 12px;">
                                      <em>Enter the one-time amount to be charged to Owners and Tenants for documentation.</em>
                                    </p>
                                  </div>
                                </div>
                                <div class="row" *ngIf="showConfigMaster.otherCharges">
                                  <div class="col-sm-2">
                                    <div class="input-group input-group-sm">
                                      <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                      <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 100px !important;">
                                        {{ showConfigMaster.otherCharges.ownerEkycCharges }}
                                      </span>
                                    </div>
                                  </div>
                                  <div class="col-sm-2">
                                    <div class="input-group input-group-sm">
                                      <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                      <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 100px !important;">
                                        {{ showConfigMaster.otherCharges.tenantEkycCharges }}
                                      </span>
                                    </div>
                                  </div>
                                  <div class="col-sm-2 ml-2">
                                    <div class="input-group input-group-sm">
                                      <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                      <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 100px !important;">
                                        {{ showConfigMaster.otherCharges.ownerDocumentCharges }}
                                      </span>
                                    </div>
                                  </div>
                                  <div class="col-sm-2">
                                    <div class="input-group input-group-sm">
                                      <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                                      <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 100px !important;">
                                        {{ showConfigMaster.otherCharges.tenantDocumentCharges }}
                                      </span>
                                    </div>
                                  </div>
                            
                                  <div class="col-sm-2">
                                    <div class="input-group input-group-sm">
                                      <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                        {{ showConfigMaster.otherCharges.effectiveDate }}
                                      </span>
                                    </div>
                                  </div>
                                  <div class="col-sm-1">
                                    <div class="d-flex">
                                      <div><i class="fas fa-thumbs-up mr-2" [ngClass]="showConfigMaster.otherCharges?.isApproved?'color-bg-green':'color-bg-gray'"></i></div>
                                      <div *ngIf="showConfigMaster.otherCharges?.isApproved ">
                                        <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Service Charges'" >
                                          <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a>
                                        </div>
                                    </div>
                                  </div> 
                                </div>
                              </div>
                          
                            </div>
                          </div>
                          <hr class="solid">
                          <!--Data Grouping-->
                          <div>
                            <div class=" p-3 ">
                              <div>
                                <span style="font-size: 16px;color:#78177e;">Data Grouping</span>
                                <div>
                                  <p class="small text-muted" style="font-size: 12px;"><em>Specify the number of days that is to be considered for showing trending PG's to Tenants.</em></p>
                                </div>
                              </div>
                              <div>
                               <div class="row" *ngIf="editConfigMaster.dataGrouping">
                                  
                                  <div class="col-sm-3">
                                    <div>Trending PG Configuration</div>
                                  <div class="input-group input-group-sm">
                                    <input 
                                    type="text" 
                                    class="form-control form-control-sm"
                                    [(ngModel)]="editConfigMaster.dataGrouping.considerDays" [disabled]="dataGroupingDisabled" (keypress)="numberOnly($event)" maxlength="3"
                                    [ngClass]="{'is-invalid': !dataGroupingDisabled && isNotValidNumber(editConfigMaster.dataGrouping.considerDays) }" 
                                    style="max-width: 70px !important;" />
                                    <span class="input-group-text">Days</span>
                                  </div>
                                  </div>
                                  <div class="col-sm-2">
                                    <div>Effective On</div>
                                    <div class="input-group input-group-sm">
                                      <input 
                                        type="date" 
                                        class="form-control form-control-sm" [(ngModel)]="editConfigMaster.dataGrouping.effectiveDate" [disabled]="dataGroupingDisabled"
                                        [ngClass]="{'is-invalid': !dataGroupingDisabled && (!editConfigMaster.dataGrouping?.effectiveDate || invaliedEffectiveDate('dataGrouping',editConfigMaster.dataGrouping?.effectiveDate ) )}" 
                                        />
                                    </div>
                                 </div>
                                  <div class="col-sm-2 mt-4">
                                    <div class="d-flex">
                                      <div><i class="fas fa-thumbs-up mr-2 mt-1"  [ngClass]="editConfigMaster.dataGrouping?.isApproved?'color-bg-green':'color-bg-gray'"></i></div>
                                      <div *ngIf="editConfigMaster.dataGrouping?.isApproved">
                                        <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Data Grouping'" >
                                         <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>
                                         <div *ngIf=" dataGroupingDisabled && !editConfigMaster.dataGrouping?.isApproved && rolesArray.includes('CONFIGURATION_MASTER_APPROVAL_WRITE')" title="Click here to Approve or Reject" >
                                          <a class="approve-icon" 
                                             data-bs-toggle="modal" data-bs-target="#approveRejectModel" (click)="openApproveOrRejectModel('dataGrouping',editConfigMaster.dataGrouping)">
                                            <i class="far fa-hand-point-up mt-1 mr-2"></i>
                                          </a>
                                        </div> 
                                    <div *ngIf="dataGroupingDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                      <button class="btn btn-sm btn-outline-secondary" (click)="dataGroupingDisabled = false">
                                        <i class="fas fa-edit"></i>
                                      </button>
                                    </div>
                                    <div class="btn-group" *ngIf="!dataGroupingDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                      <button class="btn btn-sm btn-outline-secondary" (click)="trendingPGSubmit('update')">
                                        <i class="fas fa-check"></i>
                                      </button>
                                      <button class="btn btn-sm btn-outline-secondary" (click)="trendingPGReset()">
                                        <i class="fas fa-redo" style="color: red;"></i>
                                      </button>
                                    </div>
                                    </div>
                                </div>
                               </div>
                               <div class="row mt-2" *ngIf="showConfigMaster.dataGrouping">                               
                                <div class="col-sm-3">
                                <div class="input-group input-group-sm">
                                  <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 70px !important;">
                                    {{ showConfigMaster.dataGrouping?.considerDays }}
                                  </span>
                                  <span class="input-group-text">Days</span>
                                </div>
                                </div>
                                <div class="col-sm-2">
                                  <div class="input-group input-group-sm">
                                    <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                      {{ showConfigMaster.dataGrouping?.effectiveDate }}
                                    </span>
                                  </div>
                               </div>
                                <div class="col-sm-2 mt-1">
                                  <div class="d-flex">
                                    <div><i class="fas fa-thumbs-up mr-2 mt-1 color-bg-green"></i></div>
                                    <div>
                                      <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Data Grouping'" >
                                       <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>
                                  </div>
                              </div>
                             </div>
                              </div>
                            </div>
                          </div>
                          <hr class="solid">
                          <div>
                            <div class="p-3">
                              <div>
                                <span style="font-size: 16px;color:#78177e;">Force Checkout </span>
                                <p class="small text-muted" style="font-size: 12px;">
                                  <em>Specify the number of days that are to be considered for enabling force checkout for owner in some special situations.</em>
                                </p>
                              </div>
                              <div>
                                <div class="row" *ngIf="editConfigMaster.forceCheckOut">                                 
                                  <div class="col-sm-3">
                                    <div>Force Checkout Enabling Days</div>
                                    <div class="input-group input-group-sm">
                                      <input type="text"  class="form-control form-control-sm"  style="max-width: 70px !important;" 
                                        [(ngModel)]="editConfigMaster.forceCheckOut.forceCheckOutDays" 
                                        (keypress)="numberOnly($event)"  maxlength="3"
                                        [ngClass]="{'is-invalid': !forceCheckoutDisabled && isNotValidNumber(editConfigMaster.forceCheckOut.forceCheckOutDays)}"
                                        [disabled]="forceCheckoutDisabled" />
                                      <span class="input-group-text">Days </span>
                                    </div>
                                  </div>
                                  <div class="col-sm-2">
                                    <div>Effective On</div>
                                    <div class="input-group input-group-sm">
                                      <input 
                                        type="date" 
                                        class="form-control form-control-sm" [(ngModel)]="editConfigMaster.forceCheckOut.effectiveDate" [disabled]="forceCheckoutDisabled"
                                        [ngClass]="{'is-invalid': !forceCheckoutDisabled && (!editConfigMaster.forceCheckOut?.effectiveDate || invaliedEffectiveDate('forceCheckOut',editConfigMaster.forceCheckOut?.effectiveDate ) )}" 
                                        />
                                    </div>
                                 </div>
                                  <div class="col-sm-2 mt-4">
                                    <div class="d-flex">
                                      <div><i class="fas fa-thumbs-up mr-2 mt-1" [ngClass]="editConfigMaster.forceCheckOut?.isApproved ?'color-bg-green':'color-bg-gray'"></i></div>
                                      <div *ngIf="editConfigMaster.forceCheckOut?.isApproved">
                                        <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Force Checkout'" >
                                         <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>
                                         <div *ngIf=" forceCheckoutDisabled && !editConfigMaster.forceCheckOut?.isApproved && rolesArray.includes('CONFIGURATION_MASTER_APPROVAL_WRITE')" title="Click here to Approve or Reject" >
                                          <a class="approve-icon" data-bs-toggle="modal" data-bs-target="#approveRejectModel" (click)="openApproveOrRejectModel('forceCheckOut',editConfigMaster.forceCheckOut)">
                                            <i class="far fa-hand-point-up mt-1 mr-2"></i>
                                          </a>
                                        </div> 
                                    <div *ngIf="forceCheckoutDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                      <button class="btn btn-sm btn-outline-secondary" (click)="forceCheckoutDisabled = false;">
                                        <i class="fas fa-edit"></i>
                                      </button>
                                    </div>
                                    <div class="btn-group" *ngIf="!forceCheckoutDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                      <button class="btn btn-sm btn-outline-secondary" (click)="forceCheckoutSubmit('update')">
                                        <i class="fas fa-check"></i>
                                      </button>
                                      <button class="btn btn-sm btn-outline-secondary" (click)="forceCheckoutReset()">
                                        <i class="fas fa-redo" style="color: red;"></i>
                                      </button>
                                    </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="row mt-1" *ngIf="showConfigMaster.forceCheckOut">                                 
                                  <div class="col-sm-3">
                                    <div class="input-group input-group-sm">
                                      <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 70px !important;">
                                        {{ showConfigMaster.forceCheckOut.forceCheckOutDays }}
                                      </span>
                                      <!-- <input type="text"  class="form-control form-control-sm"  style="max-width: 70px !important;" 
                                        [(ngModel)]="showConfigMaster.forceCheckOut.forceCheckOutDays" 
                                         disabled /> -->
                                      <span class="input-group-text">Days </span>
                                    </div>
                                  </div>
                                  <div class="col-sm-2">
                                    <div class="input-group input-group-sm">
                                      <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                        {{ showConfigMaster.forceCheckOut.effectiveDate }}
                                      </span>
                                      <!-- <input 
                                        type="text" 
                                        class="form-control form-control-sm" [ngModel]="showConfigMaster.forceCheckOut.forceCheckOutDays | date:'dd-MM-yyyy'" disabled/> -->
                                    </div>
                                 </div>
                                  <div class="col-sm-2 mt-1">
                                    <div class="d-flex">
                                      <div><i class="fas fa-thumbs-up mr-2 mt-1 color-bg-green"></i></div>
                                      <div>
                                        <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Force Checkout'" >
                                         <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            
                          </div>
                          <hr class="solid">
                          <div>
                            <div class="p-3">
                              <div>
                                <span style="font-size: 16px;color:#78177e;">No Rental Agreement </span>
                                <p class="small text-muted" style="font-size: 12px;">
                                  <em>Specify the number of days that are to be considered for No Rental Agreement generation.</em>
                                </p>
                              </div>
                              <div>
                                <div class="row"  *ngIf="editConfigMaster.noRentalAgreement">                                  
                                  <div class="col-sm-4">
                                    <div>No Rental agreement upto</div>
                                    <div class="input-group input-group-sm">
                                      <input type="text"  class="form-control form-control-sm"  style="max-width: 70px !important;" 
                                        [(ngModel)]="editConfigMaster.noRentalAgreement.noRentalAgreementDays" 
                                        (keypress)="numberOnly($event)"  maxlength="3"
                                        [ngClass]="{'is-invalid': !noRentalAgreementDisabled && isNotValidNumber(editConfigMaster.noRentalAgreement.noRentalAgreementDays)}"
                                        [disabled]="noRentalAgreementDisabled" />
                                      <span class="input-group-text">Days </span>
                                    </div>
                                  </div>
                                  <div class="col-sm-2">
                                    <div>Effective On</div>
                                    <div class="input-group input-group-sm">
                                      <input 
                                        type="date" 
                                        class="form-control form-control-sm" [(ngModel)]="editConfigMaster.noRentalAgreement.effectiveDate" [disabled]="noRentalAgreementDisabled"
                                        [ngClass]="{'is-invalid': !noRentalAgreementDisabled && (!editConfigMaster.noRentalAgreement?.effectiveDate || invaliedEffectiveDate('noRentalAgreement',editConfigMaster.noRentalAgreement?.effectiveDate ) )}" 
                                        />
                                    </div>
                                 </div>
                                  <div class="col-sm-2 mt-4">
                                    <div class="d-flex">
                                      <div><i class="fas fa-thumbs-up mr-2 mt-1"  [ngClass]="editConfigMaster.noRentalAgreement?.isApproved?'color-bg-green':'color-bg-gray'"></i></div>
                                      <div *ngIf="editConfigMaster.noRentalAgreement?.isApproved">
                                        <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='No Rental agreement'" >
                                         <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>
                                         <div *ngIf=" noRentalAgreementDisabled && !editConfigMaster.noRentalAgreement?.isApproved && rolesArray.includes('CONFIGURATION_MASTER_APPROVAL_WRITE')" title="Click here to Approve or Reject" >
                                          <a class="approve-icon" data-bs-toggle="modal" data-bs-target="#approveRejectModel" (click)="openApproveOrRejectModel('noRentalAgreement',editConfigMaster.noRentalAgreement)">
                                            <i class="far fa-hand-point-up mt-1 mr-2"></i>
                                          </a>
                                        </div> 
                                    <div *ngIf="noRentalAgreementDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                      <button class="btn btn-sm btn-outline-secondary" (click)="noRentalAgreementDisabled = false;">
                                        <i class="fas fa-edit"></i>
                                      </button>
                                    </div>
                                    <div class="btn-group" *ngIf="!noRentalAgreementDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                      <button class="btn btn-sm btn-outline-secondary" (click)="noRentalAgreementSubmit('update')">
                                        <i class="fas fa-check"></i>
                                      </button>
                                      <button class="btn btn-sm btn-outline-secondary" (click)="noRentalAgreementReset()">
                                        <i class="fas fa-redo" style="color: red;"></i>
                                      </button>
                                    </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="row mt-2" *ngIf="showConfigMaster.noRentalAgreement">                                  
                                  <div class="col-sm-4">
                                    <div class="input-group input-group-sm">
                                      <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 70px !important;">
                                        {{ showConfigMaster.noRentalAgreement.noRentalAgreementDays }}
                                      </span>
                                      <span class="input-group-text">Days </span>
                                    </div>
                                  </div>
                                  <div class="col-sm-2">
                                    <div class="input-group input-group-sm">
                                      <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                        {{ showConfigMaster.noRentalAgreement?.effectiveDate }}
                                      </span>
                                    </div>
                                 </div>
                                  <div class="col-sm-2 mt-1">
                                    <div class="d-flex">
                                      <div><i class="fas fa-thumbs-up mr-2 mt-1 color-bg-green"></i></div>
                                      <div>
                                        <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='No Rental agreement'" >
                                         <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            
                          </div>
                          <hr class="solid"> 
                            <div>
                              <div class="p-3 ">
                                <div>
                                  <div><span style="font-size: 16px;color:#78177e;">Security Deposit Deadline </span></div>
                                  <div>
                                    <p class="small text-muted" style="font-size: 12px;">
                                    <em>Configure the number of days to collect total security deposit amount before check-in date to avoid auto cancellation.</em>
                                    </p>
                                  </div>
                                </div>
                                <div >
                                  <div class="row"  *ngIf="editConfigMaster.securityDepositDeadLineDetails">
                                    <div class="col-sm-2">
                                      <div>Condition</div>
                                      <div class="input-group input-group-sm" *ngIf="securityDepositDeadLineDisabled">
                                        <input type="text" class="form-control form-control-sm" [(ngModel)]="editConfigMaster.securityDepositDeadLineDetails.trigger_condition" [disabled]="securityDepositDeadLineDisabled" /> 
                                      </div> 
                                      <div class="input-group input-group-sm" *ngIf="!securityDepositDeadLineDisabled">
                                        <select class="form-select form-select-sm" [(ngModel)]="editConfigMaster.securityDepositDeadLineDetails.trigger_condition" [ngClass]="{'is-invalid': !securityDepositDeadLineDisabled && !editConfigMaster.securityDepositDeadLineDetails.trigger_condition }" >
                                          <option *ngFor="let cond of triggerCondition" [value]="cond.cond_name">{{cond.cond_name}}</option>
                                        </select>
                                      </div>
                                     </div>
                                    <div class="col-sm-2">
                                      <div>Before check-in</div>
                                      <div class="input-group input-group-sm">
                                        <input 
                                          type="text" 
                                          class="form-control form-control-sm"
                                          [(ngModel)]="editConfigMaster.securityDepositDeadLineDetails.auto_cancellation_day" [disabled]="securityDepositDeadLineDisabled" (keypress)="numberOnly($event)" maxlength="3" 
                                           [ngClass]="{'is-invalid': !securityDepositDeadLineDisabled &&  isNotValidNumber(editConfigMaster.securityDepositDeadLineDetails.auto_cancellation_day) }" 
                                          style="max-width: 70px !important;" />
                                          <span class="input-group-text">Days</span>
                                      </div>
                                      <p class="small text-muted" style="font-size: 12px;">
                                      <em>Set the days to collect Deposit before auto cancellation.</em>
                                      </p>
                                    </div>
                                    <div class="col-sm-2">
                                      <div>Deduction Type</div>
                                      <div class="input-group input-group-sm">
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                          {{ editConfigMaster.securityDepositDeadLineDetails?.trigger_value }}
                                        </span>
                                      </div>
                                    </div>
                                     <div class="col-sm-2">
                                      <div>Deduction</div>
                                      <div class="input-group input-group-sm">
                                        <input 
                                          type="text" 
                                          class="form-control form-control-sm" (keypress)="percentageOnly($event)" maxlength="5"
                                          [(ngModel)]="editConfigMaster.securityDepositDeadLineDetails.deduction_percentage" [disabled]="securityDepositDeadLineDisabled" 
                                           [ngClass]="{'is-invalid': !securityDepositDeadLineDisabled && isNotValidNumber(editConfigMaster.securityDepositDeadLineDetails.deduction_percentage) }" 
                                          style="max-width: 70px !important;"/>
                                          <span class="input-group-text">%</span>
                                      </div>
                                      <p class="small text-muted" style="font-size: 12px;">
                                      <em>Percentage of security deposit to deduct.</em>
                                      </p>
                                    </div>
                                    <div class="col-sm-2">
                                      <div>Effective On</div>
                                      <div class="input-group input-group-sm">
                                        <input 
                                          type="date" 
                                          class="form-control form-control-sm" [(ngModel)]="editConfigMaster.securityDepositDeadLineDetails.effectiveDate"  [disabled]="securityDepositDeadLineDisabled"
                                          [ngClass]="{'is-invalid': !securityDepositDeadLineDisabled && (!editConfigMaster.securityDepositDeadLineDetails?.effectiveDate || invaliedEffectiveDate('securityDepositDeadLineDetails',editConfigMaster.securityDepositDeadLineDetails?.effectiveDate ) )}"
                                          />
                                      </div>
                                   </div>
                                    <!-- Action Button -->
                                    <div class="col-sm-1 mt-4">
                                      <div class="d-flex" >
                                        <div><i class="fas fa-thumbs-up mr-2" [ngClass]="editConfigMaster.securityDepositDeadLineDetails?.isApproved ? 'color-bg-green':'color-bg-gray'"></i></div>
                                        <div *ngIf="editConfigMaster.securityDepositDeadLineDetails?.isApproved" >
                                          <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Security Deposit Deadline'" >
                                           <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>
                                           <div *ngIf=" securityDepositDeadLineDisabled && !editConfigMaster.securityDepositDeadLineDetails?.isApproved && rolesArray.includes('CONFIGURATION_MASTER_APPROVAL_WRITE')" title="Click here to Approve or Reject" >
                                            <a class="approve-icon" data-bs-toggle="modal" data-bs-target="#approveRejectModel" (click)="openApproveOrRejectModel('securityDepositDeadLineDetails',editConfigMaster.securityDepositDeadLineDetails)">
                                              <i class="far fa-hand-point-up mt-1 mr-2"></i>
                                            </a>
                                          </div> 
                                      <div class="btn-group"  *ngIf="rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                        <button 
                                          class="btn btn-sm btn-outline-secondary" 
                                          *ngIf="securityDepositDeadLineDisabled"
                                          (click)="securityDepositDeadLineDisabled = false">
                                          <i class="fas fa-edit"></i>
                                        </button>
                                        <button 
                                          class="btn btn-sm btn-outline-secondary" 
                                          *ngIf="!securityDepositDeadLineDisabled"
                                          (click)="securityDepositDeadLineSubmit('update')">
                                          <i class="fas fa-check"></i>
                                        </button>
                                        <button 
                                          class="btn btn-sm btn-outline-secondary" 
                                          *ngIf="!securityDepositDeadLineDisabled"
                                          (click)="securityDepositDeadLineReset()">
                                          <i class="fas fa-redo" style="color: red;"></i>
                                        </button>
                                      </div>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="row"  *ngIf="showConfigMaster.securityDepositDeadLineDetails">
                                    <div class="col-sm-2">
                                      <div class="input-group input-group-sm" >
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                          {{ showConfigMaster.securityDepositDeadLineDetails?.trigger_condition }}
                                        </span>
                                      </div> 
                                     </div>
                                    <div class="col-sm-2">
                                      <div class="input-group input-group-sm">
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 70px !important;">
                                          {{ showConfigMaster.securityDepositDeadLineDetails?.auto_cancellation_day }}
                                        </span>
                                          <span class="input-group-text">Days</span>
                                      </div>
                                     
                                    </div>
                                    <div class="col-sm-3">
                                      <div class="input-group input-group-sm">
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                          {{ showConfigMaster.securityDepositDeadLineDetails?.trigger_value }}
                                        </span>
                                      </div>
                                    </div>
                                     <div class="col-sm-2">
                                      <div class="input-group input-group-sm">
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 70px !important;">
                                          {{ showConfigMaster.securityDepositDeadLineDetails?.deduction_percentage }}
                                        </span>
                                          <span class="input-group-text">%</span>
                                      </div>
                                    </div>
                                    <div class="col-sm-2">
                                      <div class="input-group input-group-sm">
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                          {{ showConfigMaster.securityDepositDeadLineDetails?.effectiveDate }}
                                        </span>
                                      </div>
                                   </div>
                                    <div class="col-sm-1 mt-2">
                                      <div class="d-flex" >
                                        <div><i class="fas fa-thumbs-up mr-2 color-bg-green mt-1"></i></div>
                                        <div>
                                          <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Security Deposit Deadline'" >
                                           <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                             
                            </div>
                            <hr class="solid" > 
                         <div >
                          <div class="p-3">
                            <div class="row">
                              <div class="col-sm-10">
                                <div >
                                  <span style="font-size: 16px;color:#78177e;">Cancellation And Refund Policy (Before check in)</span>
                                  <p class="small text-muted" style="font-size: 12px;"><em>Define the deduction percentage, Deduction Type and time frame for tenant cancellations before check in.</em></p>
                                </div>
                              </div>
                              <div class="col-sm-2">
                                <div *ngIf="pgTypes.length>0" class="mr-4">
                                      <select class="form-select form-select-sm" [(ngModel)]="settingType" (ngModelChange)="changeSettingType()" > 
                                      <option *ngFor="let type of pgTypes"  [value]="type.pg_type_id" >{{type.pg_type_name}}</option>
                                     </select>
                                </div>
                              </div>
                            </div>

                            <div class="card align-items-center pt-4 " *ngIf="pgTypes.length == 0">
                              <p>
                                The <a href="javascript:void(0)" (click)="navigateInitialConfig()" >Initial Configuration (PG Type)</a> must be configured before setting up the Master Configuration.<a href="javascript:void(0)" title="Navigate to Initial Configuration screen" (click)="navigateInitialConfig()"> Click here</a> to configure PG Type.
                              </p>
                            </div>
                            
                            <div  *ngIf="pgTypes.length > 0">
                              <div class="pt-2 pb-2" *ngIf="rolesArray.includes('CONFIGURATION_MASTER_WRITE')" >
                                <div class="d-flex">
                                  <div style="width: 40px;"></div>
                                  <div class="mr-3" style="width: 80px;">
                                    <div>Condition</div>
                                    <div class="input-group input-group-sm">
                                      <select class="form-select form-select-sm" style="max-width: 80px !important;"  [(ngModel)]="beforeCheckInCRfModel.trigger_condition"
                                      [ngClass]="{'is-invalid': beforeCheckInCRfSaveVali && !beforeCheckInCRfModel.trigger_condition}" >
                                      <option *ngFor="let cond of triggerCondition" [value]="cond.cond_name">{{cond.cond_name}}</option>
                                      </select>
                                    </div>
                                  </div>
                                      <div class="mr-3" style="width: 155px;">
                                        <div class="input-group input-group-sm mt-4">
                                          <input 
                                          type="text" 
                                          class="form-control form-control-sm"
                                          [(ngModel)]="beforeCheckInCRfModel.before_checkin_days" (keypress)="numberOnly($event)" maxlength="3"
                                          [ngClass]="{'is-invalid': beforeCheckInCRfSaveVali && isNotValidNumber(beforeCheckInCRfModel.before_checkin_days)  }" 
                                          style="max-width: 84px !important;"
                                          />
                                          <span class="input-group-text">Days</span>
                                        </div>
                                        <p class="small text-muted" style="font-size: 12px;"><em>Enter maximum days before check in.</em></p>
                                      </div>
                                      <div class="mr-3" style="width: 190px;">
                                        <div>Deduction Type</div>
                                        <div class="input-group input-group-sm">
                                           <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                          {{ beforeCheckInCRfModel.trigger_value }}
                                        </span>
                                        </div>
                                      </div>
                                      <div style="width: 160px;">
                                          <div>Deduction</div>
                                          <div class="input-group input-group-sm">
                                            <input 
                                            type="text" 
                                            class="form-control form-control-sm"
                                            [(ngModel)]="beforeCheckInCRfModel.deduction_percentage" (keypress)="percentageOnlyWithZero($event)" maxlength="5"
                                            [ngClass]="{'is-invalid': beforeCheckInCRfSaveVali &&  isNotValidNumber(beforeCheckInCRfModel.deduction_percentage) }" 
                                            style="max-width: 90px !important;"
                                            />
                                            <span class="input-group-text">%</span>
                                           </div>
                                          <p class="small text-muted" style="font-size: 12px;"><em>Percentage of booking amount to deduct.</em></p>
                                      </div>
                                      <div class="ml-1">
                                        <div style="height: 23px;"></div>
                                        <div>
                                          <button type="button" class="btn btn-sm btn-primary" (click)="beforeCheckInCRfAdd()" >Add</button>
                                        </div>
                                      </div>
                                  </div>
                              </div>
                              <div class="d-flex mb-1" *ngIf="rolesArray.includes('CONFIGURATION_MASTER_WRITE')" >
                                <div><span style="color: red; font-size: 14px; margin-top: 15px;" >{{!canSubmit ? 'Data will be saved to the database only after clicking the update button.':''}}</span></div>
                                
                                <div class="ml-auto mr-1 d-flex" *ngIf="dataSource.data?.length>0">
                                  <div><i class="fas fa-thumbs-up mr-2 mt-1"  [ngClass]="editConfigMaster.beforeCheckInCancellationRefundMainObjModel?.isApproved?'color-bg-green':'color-bg-gray'"></i></div>
                                  <div *ngIf="this.editConfigMaster.beforeCheckInCancellationRefundMainObjModel?.isApproved ">
                                    <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Cancellation And Refund Policy'" >
                                     <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>
                                     <div *ngIf=" canSubmit && !editConfigMaster.beforeCheckInCancellationRefundMainObjModel?.isApproved && rolesArray.includes('CONFIGURATION_MASTER_APPROVAL_WRITE')" title="Click here to Approve or Reject" >
                                      <a class="approve-icon" data-bs-toggle="modal" data-bs-target="#approveRejectModel" (click)="openApproveOrRejectModel('beforeCheckInCancellationRefundMainObjModel',editConfigMaster.beforeCheckInCancellationRefundMainObjModel)">
                                        <i class="far fa-hand-point-up mt-1 mr-2"></i>
                                      </a>
                                    </div> 
                                  <div style="margin-right: 8px;margin-top:3px;">Effective On </div>
                                  <div style="width: 120px;margin-right: 10px;">
                                    <div class="input-group input-group-sm">
                                      <input class="form-control form-control-sm"
                                        type="date" [(ngModel)]="crpEffectiveDate" (change)="canSubmit=false"
                                        [ngClass]="{'is-invalid': !canSubmit && (!crpEffectiveDate || multirullsEffectiveDateValidation(crpEffectiveDate) )}"
                                        />
                                    </div>
                                 </div>
                                  <button type="button" class="btn btn-sm btn-primary" [disabled]="canSubmit" (click)="beforeCheckInCRfUpDate('update')">Update</button>
                                  <button class="btn btn-sm btn-outline-secondary ml-1" (click)="beforeCheckInCRDatafReset()"  ><i class="fas fa-redo" style="color: red;"></i></button>
                                </div>
                              </div>
                                  <div class="card card-body m-0 p-0" *ngIf="dataSource.data?.length>0">
                                    <div>
                                       <div>
                                        <div class="row">
                                          <div>
                                        <mat-table [dataSource]="dataSource"
                                                    #table
                                                    class="example-list"
                                                    cdkDropList
                                                    [cdkDropListData]="dataSource.data"
                                                    (cdkDropListDropped)="drop($event)" style="border:0px;">
                        
                                          <ng-container matColumnDef="trigger_condition" class="example-box">
                                            <!-- <mat-header-cell  *matHeaderCellDef ></mat-header-cell> -->
                                            <mat-cell data-label="trigger_condition" *matCellDef="let element" style="width: 130px;flex:none;padding-right: 0px;" [ngClass]="element.isDelete? 'example-box row-strike' :'example-box'"  >
                                            <span style="min-width:20px" > {{ element.priority }} </span> 
                                              <div class="ml-1" *ngIf="!element.isConfirm || element.isDelete" >
                                                <input type="text" class="form-control form-control-sm" [(ngModel)]="element.trigger_condition" [disabled]="!element.isConfirm || element.isDelete" style="width: 80px !important;" /> 
                                              </div> 
                                              <div class="ml-1" *ngIf="!element.isDelete && element.isConfirm" >
                                                <select class="form-select form-select-sm" style="width: 80px !important;"  [(ngModel)]="element.trigger_condition"
                                                [ngClass]="{'is-invalid': !element.isDelete && element.isConfirm && !element.trigger_condition  }" >
                                                <option *ngFor="let cond of triggerCondition" [value]="cond.cond_name">{{cond.cond_name}}</option>
                                                </select>
                                              </div>
                                             </mat-cell>
                                          </ng-container>
                                        
                                          <ng-container matColumnDef="before_checkin_days" class="example-box">
                                            <!-- <mat-header-cell *matHeaderCellDef ></mat-header-cell> -->
                                            <mat-cell data-label="before_checkin_days" *matCellDef="let element" style="width: 154px;flex: none;padding-right: 0px;" [ngClass]="element.isDelete? 'example-box row-strike' :'example-box'" > 
                                              <div class="d-flex input-group input-group-sm">
                                                <input type="text" 
                                                        class="form-control form-control-sm"
                                                        [(ngModel)]="element.before_checkin_days" (keypress)="numberOnly($event)" maxlength="3" [disabled]="element.isDelete || !element.isConfirm"
                                                        [ngClass]="{'is-invalid': !element.isDelete && element.isConfirm && isNotValidNumber(element.before_checkin_days) }" 
                                                        style="max-width: 84px !important;" />
                                                <span class="input-group-text">Days</span>
                                              </div>
                                              </mat-cell>
                                          </ng-container>
                                          
                                          <ng-container matColumnDef="trigger_value" class="example-box">
                                            <!-- <mat-header-cell *matHeaderCellDef ></mat-header-cell> -->
                                            <mat-cell data-label="requirePayslip" *matCellDef="let element"  style="width: 210px;padding-right: 0px;flex: none;" [ngClass]="element.isDelete? 'example-box row-strike' :'example-box'" > 
                                              <div >
                                                <span class="form-control form-control-sm" style="background-color: #eaecf4;width: 190px !important;">
                                                  {{ element.trigger_value }}
                                                </span>
                                              </div>
                                              <!--div *ngIf="!element.isEdit || element.isDelete">
                                                <input type="text" class="form-control form-control-sm" [(ngModel)]="element.trigger_value" [disabled]="!element.isEdit || element.isDelete" style="width: 190px !important;"/> 
                                              </div-->
                                              <!--div *ngIf="!element.isDelete && element.isEdit" >
                                                <select class="form-select form-select-sm" [(ngModel)]="element.trigger_value" style="width: 190px !important;" 
                                                [ngClass]="{'is-invalid': !element.isDelete && element.isEdit && !element.trigger_value }" >
                                                <option *ngFor="let trigger of triggerOn" [value]="trigger.trigger_on">{{trigger.trigger_on}}</option>
                                                </select>
                                              </div-->
                                            </mat-cell>
                                          </ng-container>

                                          <ng-container matColumnDef="deduction_percentage" class="example-box">
                                            <!-- <mat-header-cell  *matHeaderCellDef ></mat-header-cell> -->
                                            <mat-cell data-label="requirePayslip" *matCellDef="let element"  style="width: 150px !important;flex:none;padding-right: 0px;" [ngClass]="element.isDelete? 'example-box row-strike' :'example-box'"> 
                                              <div class="d-flex input-group input-group-sm">
                                                <input  type="text" 
                                                        class="form-control form-control-sm"
                                                        [(ngModel)]="element.deduction_percentage" (keypress)="percentageOnlyWithZero($event)" maxlength="5" [disabled]="element.isDelete || !element.isConfirm"
                                                        [ngClass]="{'is-invalid': !element.isDelete && element.isConfirm && isNotValidNumber(element.deduction_percentage) }" 
                                                        style="max-width: 90px !important;"
                                                        disabled />
                                                <span class="input-group-text">%</span>
                                               </div>                                              
                                            </mat-cell>
                                          </ng-container>
                                        
                                          <ng-container matColumnDef="action" class="example-box">
                                            <!-- <mat-header-cell *matHeaderCellDef></mat-header-cell> -->
                                            <mat-cell data-label="action" *matCellDef="let element ;let i=index"  style="padding-left:0px;flex:none;" [ngClass]="element.isDelete? 'example-box row-strike' :'example-box'">
                                              <div class="input-group" *ngIf="rolesArray.includes('CONFIGURATION_MASTER_WRITE')" >
                                                <div class="btn-group">
                                                  <button class="btn btn-sm btn-outline-secondary"  *ngIf="!element.isDelete && !element.isConfirm"
                                                    (click)="element.isConfirm = true;" title="Edit The Item"> 
                                                     <i class="fas fa-edit"></i>
                                                  </button>
                                                  <button class="btn btn-sm btn-outline-secondary" *ngIf="!element.isDelete && element.isConfirm"
                                                    (click)="beforeCheckInCRfModify(element)" title="Edit The Item">
                                                     <i class="fas fa-check"></i>
                                                  </button>
                                                <button class="btn btn-sm btn-outline-secondary" *ngIf="!element.isDelete" 
                                                    (click)="beforeCheckInCRfDelete(element,i)" title="Delete The Item"> 
                                                    <i class="fas fa-trash" style="color: red;"></i>
                                                </button>
                                                  
                                                  <button class="btn btn-sm btn-outline-secondary" *ngIf="element.cancellation_id && (element.isDelete || element.isEdit)"
                                                    (click)="undoEditItem(element,i);undoDelete(element);" title="Undo Edit Item">
                                                    <i class="fas fa-redo" style="color: red;"></i>
                                                  </button>
                                                  <!--button class="btn btn-sm btn-outline-secondary" *ngIf="element.isDelete"
                                                    (click)="undoDelete(element)" title="Undo Delete Item">
                                                    <i class="fas fa-redo" style="color: red;" ></i>
                                                  </button -->
                                                </div>
                                               </div>
                                            </mat-cell>
                                            
                                          </ng-container>          
                                          <!-- <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row> -->
                                          <mat-row *matRowDef="let row; columns: displayedColumns;" cdkDrag></mat-row>
                                        </mat-table>
                                      <!-- </div> -->
                                        <div cdkDropList [cdkDropListData]="dataSource.data" (cdkDropListDropped)="drop($event)"></div>
                                        </div>
                                        </div>
                                    </div>
                                    </div>
                                  </div>
                                  <div class="card card-body m-0 p-0 mt-3" *ngIf="showConfigMaster.beforeCheckInCancellationRefundMainObjModel">
                                    <div class="row">
                                      <div class="d-flex m-2">
                                        <span style="font-size: 16px;color:#6610f2; margin-left: 5px;">Currently applicable slabs. Effective from {{showConfigMaster.beforeCheckInCancellationRefundMainObjModel?.effectiveDate}} </span>
                                        <i class="fas fa-thumbs-up ml-2 color-bg-green" ></i>
                                        <div class="ml-2">
                                          <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Cancellation And Refund Policy'" >
                                           <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a>
                                        </div>
                                     </div>
                                       <div>
                                        <div *ngFor="let element of showConfigMaster.beforeCheckInCancellationRefundMainObjModel.zoy_before_check_in_cancellation_info" >
                                          <div class="d-flex mb-1 ml-4">
                                            <span style="min-width:20px" > {{ element.priority }} </span> 
                                            <div class="ml-1" >
                                              <span class="form-control form-control-sm"  style="background-color: #eaecf4;width: 80px !important;" > {{element.trigger_condition}} </span>
                                            </div> 
                                            <div>
                                            <div class="input-group input-group-sm ml-3">
                                              <span class="form-control form-control-sm"style="background-color: #eaecf4;width: 70px !important;" >
                                                      {{element.before_checkin_days}}
                                              </span>
                                              <span class="input-group-text">Days</span>
                                            </div> 
                                          </div> 
                                          <span class="form-control form-control-sm"  style="background-color: #eaecf4;width: 190px !important;margin-left: 40px;">{{element.trigger_value}}</span>
                                           <div class="ml-3">
                                            <div class="input-group input-group-sm">
                                              <span class="form-control form-control-sm" style="background-color: #eaecf4;width: 90px!important;">
                                                {{ element.deduction_percentage }} 
                                              </span>
                                                <span class="input-group-text">%</span>
                                            </div>
                                          </div>
                                          </div>
                                        </div>
                                     
                                        </div>
                                    </div>
                                  </div>
                            </div>
                           </div>
                        </div>
                        <hr class="solid" >
                            <div >
                              <div class="p-3">
                                <div class="form-group">
                                  <div class="row">
                                      <div>
                                        <span style="font-size: 16px;color:#78177e;">Short term duration period:</span>
                                        <p class="small text-muted" style="font-size: 12px;"><em>Define the deduction percentage, Deduction Type and time frame for tenant cancellations before check in.</em></p>
                                      </div>
                                  </div>
                                  <div class="d-flex mb-1 ml-4">
                                    <div style="margin-left: 40px;">
                                      <div>Start Day</div>
                                      <input type="text" class="form-control form-control-sm" id="start_day"  required autocomplete="off"
                                      [(ngModel)]="shortTermData.start_day" (keypress)="numberOnly($event)" maxlength="2" style="width: 70px;" 
                                      [ngClass]="{'is-invalid': addShortTermVali && (shortTermData.start_day == undefined || shortTermData.start_day == null || convertToNumber(shortTermData.start_day) < 1  || convertToNumber(shortTermData.start_day) >= convertToNumber(shortTermData.end_day))}">
                                    </div>
                                      <h2 class="mt-3 ml-3">-</h2>
                                    <div class="ml-3">
                                      <div>End Day</div>
                                      <input type="text" class="form-control form-control-sm" id="end_day"  required autocomplete="off"
                                      [(ngModel)]="shortTermData.end_day" (keypress)="numberOnly($event)" maxlength="2" style="width: 70px;" 
                                      [ngClass]="{'is-invalid': addShortTermVali && (shortTermData.end_day == undefined || shortTermData.end_day == null || convertToNumber(shortTermData.end_day) < 1  || convertToNumber(shortTermData.start_day) >= convertToNumber(shortTermData.end_day))}">
                                    </div>
                                    <div class="ml-3">
                                    <div>Percentage</div>
                                    <div class="input-group input-group-sm">
                                      <input type="text" class="form-control form-control-sm" id="end_day"  required autocomplete="off"
                                      [(ngModel)]="shortTermData.percentage"  (keypress)="percentageOnlyWithZero($event)" maxlength="2" style="width: 70px;" 
                                      [ngClass]="{'is-invalid': addShortTermVali && (shortTermData.end_day == undefined || shortTermData.end_day == null || convertToNumber(shortTermData.end_day) < 1 || convertToNumber(shortTermData.start_day) >= convertToNumber(shortTermData.end_day))}">
                                    <span class="input-group-text">%</span>
                                     </div>
                                    </div>
                                    <div class="ml-4 mt-4">
                                      <button type="submit" class="btn btn-sm btn-primary" (click)="addShortTerm()" >Add</button>
                                    </div>
                                </div>
                                 <div *ngIf="submitted && shortTermData.end_day != null && shortTermData.start_day != null && (convertToNumber(shortTermData.start_day) < 1 ||  convertToNumber(shortTermData.end_day) < 1 )" class="text-danger">
                                    Short term duration is invalid.
                                  </div>
                                  <div class="d-flex mb-1" *ngIf="editConfigMaster.shortTermMainModel && (rolesArray.includes('CONFIGURATION_MASTER_WRITE') ||rolesArray.includes('CONFIGURATION_MASTER_APPROVAL_WRITE'))" >
                                    <div><span style="color: red; font-size: 14px; margin-top: 15px;" >{{!canShortSubmit ? 'Data will be saved to the database only after clicking the update button.':''}}</span></div>
                                    <div class="ml-auto mr-1 d-flex" *ngIf="shortTermDataList.length>0">
                                      <div>
                                        <i class="fas fa-thumbs-up mr-2" [ngClass]="this.editConfigMaster.shortTermMainModel?.isApproved ? 'color-bg-green':'color-bg-gray'"></i>
                                      </div>
                                     <div *ngIf="this.editConfigMaster.shortTermMainModel?.isApproved" >
                                       <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Short Term Duration Details'" >
                                         <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>
                                      <div *ngIf=" canShortSubmit && !this.editConfigMaster.shortTermMainModel?.isApproved && rolesArray.includes('CONFIGURATION_MASTER_APPROVAL_WRITE')" title="Click here to Approve or Reject" >
                                       <a class="approve-icon"  data-bs-toggle="modal" data-bs-target="#approveRejectModel" (click)="openApproveOrRejectModel('shortTermMainModel',editConfigMaster.shortTermMainModel)">
                                         <i class="far fa-hand-point-up mt-1 mr-2"></i>
                                       </a>
                                      </div>
                                      <div style="margin-right: 8px;margin-top:3px;">Effective On</div>
                                      <div style="width: 120px;margin-right: 10px;">
                                        <div class="input-group input-group-sm">
                                          <input (change)="canShortSubmit=false"
                                            type="date" [(ngModel)]="stpEffectiveDate"
                                            [ngClass]="{'is-invalid': !canShortSubmit && (!stpEffectiveDate || multirullsEffectiveDateValidation(stpEffectiveDate) )}"
                                            class="form-control form-control-sm"/>
                                        </div>
                                     </div>
                                      <button type="button" class="btn btn-sm btn-primary" [disabled]="canShortSubmit" (click)="submitShortTermData('update')">Update</button>
                                      <button class="btn btn-sm btn-outline-secondary ml-1" (click)="shortTermDataReset()"  ><i class="fas fa-redo" style="color: red;"></i></button>
                                    </div>
                                    
                                  </div>
                                </div>
                                <div>
                                  <hr class="solid">
                                  <div class="row mb-1 ml-4">
                                    <div class="col-sm-6">
                                      <div class="card" *ngIf="shortTermDataList.length>0" >
                                      <div class="mt-3"></div>
                                      <div *ngFor="let term of shortTermDataList; let i=index" >
                                        <div class="form-group">
                                          <div class="d-flex ml-4">
                                            
                                            <div>
                                              <input type="text" class="form-control form-control-sm" [ngClass]="term.isDelete? 'row-strike' :''" id="term_start_day"  required autocomplete="off"
                                              [(ngModel)]="term.start_day" (keypress)="numberOnly($event)" [disabled]="term.isDelete || !term.isConfirm" maxlength="2" style="width: 70px;" 
                                              [ngClass]="{'is-invalid':(submitShortTerm && !term.isDelete && term.isConfirm && (term.start_day == undefined || term.start_day == null || convertToNumber(term.start_day) < 1 ) || convertToNumber(term.start_day) >= convertToNumber(term.end_day))}">
                                            </div>
                                              <h2 class="mb-1 ml-3" >-</h2>
                                            <div class="ml-3">
                                              <input type="text" class="form-control form-control-sm" [ngClass]="term.isDelete? 'form-control form-control-sm row-strike' :'form-control form-control-sm'" id="term_end_day"  required autocomplete="off"
                                              [(ngModel)]="term.end_day" (keypress)="numberOnly($event)" [disabled]="term.isDelete || !term.isConfirm" maxlength="2" style="width: 70px;" 
                                              [ngClass]="{'is-invalid': (submitShortTerm && !term.isDelete && term.isConfirm && (term.end_day == undefined || term.end_day == null || convertToNumber(term.end_day) < 1 || convertToNumber(term.start_day) >= convertToNumber(term.end_day)))}">
                                            </div>
                                            <div>
                                            <div class="input-group input-group-sm ml-3">
                                              <input type="text" class="form-control form-control-sm" [ngClass]="term.isDelete? 'form-control form-control-sm row-strike' :'form-control form-control-sm'" id="term_percentage"  required autocomplete="off"
                                              [(ngModel)]="term.percentage"  (keypress)="percentageOnlyWithZero($event)" [disabled]="term.isDelete || !term.isConfirm" maxlength="2" style="width: 70px;" 
                                              [ngClass]="{'is-invalid': (submitShortTerm && !term.isDelete && term.isConfirm && (term.percentage == undefined || term.percentage == null))}">
                                              <span class="input-group-text">%</span>
                                               </div>
                                              </div>
                                            <div class="ml-4 mr-2">
                                              <div class="input-group">
                                                <div class="btn-group">
                                                  <button class="btn btn-sm btn-outline-secondary" *ngIf="!term.isDelete && !term.isConfirm"
                                                          (click)="term.isConfirm = true; this.submitShortTerm = true; " title="Edit The Item">
                                                    <i class="fas fa-edit"></i>
                                                  </button>
                                                  <button class="btn btn-sm btn-outline-secondary" *ngIf="!term.isDelete && !term.isConfirm"
                                                          (click)="removeShortTerm(term)" title="Delete The Item">
                                                    <i class="fas fa-trash" style="color: red;"></i>
                                                  </button>
                                                  <button class="btn btn-sm btn-outline-secondary" *ngIf="!term.isDelete && term.isConfirm"
                                                          (click)="modifyShortTerm(term,i)" title="Save Changes">
                                                    <i class="fas fa-check"></i>
                                                  </button>
                                                  <button class="btn btn-sm btn-outline-secondary" *ngIf="!term.isDelete && term.isConfirm"
                                                          (click)="undoEditShortTermItem(i)" title="Undo Edit">
                                                    <i class="fas fa-redo" style="color: red;"></i>
                                                  </button>
                                                  <button class="btn btn-sm btn-outline-secondary" *ngIf="term.isDelete"
                                                          (click)="undoShortTermDelete(term)" title="Undo Delete">
                                                    <i class="fas fa-redo" style="color: red;"></i>
                                                  </button>
                                                </div>
                                              </div>
                                            </div>
                                        </div>
                                        </div>
                                      </div>
                                    </div>
                                    </div>
                                    <div class="col-sm-6">
                                      <div class="card" *ngIf="showConfigMaster.shortTermMainModel && showConfigMaster.shortTermMainModel?.zoy_short_term_dto_info">
                                      <div class="m-2">
                                        <span style="font-size: 16px;color:#6610f2; margin-left: 5px;">Currently applicable slabs. Effective from {{showConfigMaster.shortTermMainModel?.effectiveDate}} </span>
                                        <i class="fas fa-thumbs-up ml-2 color-bg-green" ></i>
                                        <div class="ml-2">
                                          <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Short Term Duration Details'" >
                                           <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a>
                                        </div>
                                      </div>
                                      <div *ngFor="let term of showConfigMaster.shortTermMainModel.zoy_short_term_dto_info;" >
                                        <div class="d-flex mb-2 ml-3">
                                          <span class="form-control form-control-sm" style="background-color: #eaecf4;width: 70px !important;">
                                            {{ term.start_day }} 
                                          </span>
                                          <h2 style="margin: 0px 20px;"> - </h2>
                                          <span class="form-control form-control-sm" style="background-color: #eaecf4;width: 70px !important;">
                                            {{ term.end_day }} 
                                          </span>
                                          <div>
                                          <div class="input-group input-group-sm ml-2">
                                            <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 70px !important;">
                                              {{ term.percentage }} 
                                            </span>
                                              <span class="input-group-text">%</span>
                                          </div>
                                        </div>
                                        </div>
                                      </div>
                                    </div>
                                    </div>
                                  </div>
                                </div>
                            </div>
                            <hr class="solid">
                            <!--Security Deposit Refund rules-->
                            <div>
                              <!--Early Check-out Rules-->
                              <div class="p-3">
                                <div>
                                  <div><span style="font-size: 16px;color:#78177e;">Early Check-out Rules</span></div>
                                  <div >
                                    <p class="small text-muted" style="font-size: 12px;">
                                    <em>The Maximim Number of days allowing tenants to get refund of rent amount in prorate basis if not happy with the current PG.</em></p>
                                  </div>
                                </div>
                                
                                <div>
                                  <div class="row"  *ngIf="editConfigMaster.earlyCheckOutRuleDetails">
                                    <div class="col-sm-2">
                                      <div>Condition</div>
                                      <div class="input-group input-group-sm" *ngIf="earlyCheckOutRulesDisabled">
                                        <input type="text" class="form-control form-control-sm" [(ngModel)]="editConfigMaster.earlyCheckOutRuleDetails.trigger_condition" [disabled]="earlyCheckOutRulesDisabled" /> 
                                      </div> 
                                      <div class="input-group input-group-sm" *ngIf="!earlyCheckOutRulesDisabled">
                                        <select class="form-select form-select-sm" [(ngModel)]="editConfigMaster.earlyCheckOutRuleDetails.trigger_condition"
                                        [ngClass]="{'is-invalid': !earlyCheckOutRulesDisabled && (!editConfigMaster.earlyCheckOutRuleDetails.trigger_condition ||
                                                   (this.editConfigMaster.earlyCheckOutRuleDetails.check_out_day == 1 && this.editConfigMaster.earlyCheckOutRuleDetails.trigger_condition === '<')) }" >
                                          <option *ngFor="let cond of triggerCondition" [value]="cond.cond_name">{{cond.cond_name}}</option>
                                        </select>
                                      </div>
                                     </div>
                                    <div class="col-sm-2">
                                      <div>Eligibility </div>
                                      <div class="input-group input-group-sm">
                                        <input 
                                          type="text" 
                                          class="form-control form-control-sm" 
                                          [(ngModel)]="editConfigMaster.earlyCheckOutRuleDetails.check_out_day" [disabled]="earlyCheckOutRulesDisabled" (keypress)="numberOnly($event)" maxlength="3"
                                           [ngClass]="{'is-invalid': !earlyCheckOutRulesDisabled && (isNotValidNumbernAndZero(editConfigMaster.earlyCheckOutRuleDetails.check_out_day) ||
                                            (editConfigMaster.earlyCheckOutRuleDetails.check_out_day == 1 && editConfigMaster.earlyCheckOutRuleDetails.trigger_condition === '<')) }" 
                                          style="max-width: 70px !important;" />
                                          <span class="input-group-text">Days</span>
                                      </div>
                                      <p class="small text-muted" style="font-size: 12px;">
                                      <em>Enter maximum days to get refund.</em>
                                      </p>
                                    </div>
                                    <div class="col-sm-3">
                                      <div>Deduction Type</div>
                                      <div class="input-group input-group-sm" >
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                          {{ editConfigMaster.earlyCheckOutRuleDetails.trigger_value }}
                                        </span>
                                      </div>
                                      </div>
                                    <div class="col-sm-2">
                                      <div>Effective On</div>
                                      <div class="input-group input-group-sm">
                                        <input 
                                          type="date" 
                                          class="form-control form-control-sm"  [(ngModel)]="editConfigMaster.earlyCheckOutRuleDetails.effectiveDate" [disabled]="earlyCheckOutRulesDisabled" 
                                          [ngClass]="{'is-invalid': !earlyCheckOutRulesDisabled && (!editConfigMaster.earlyCheckOutRuleDetails?.effectiveDate || invaliedEffectiveDate('earlyCheckOutRuleDetails',editConfigMaster.earlyCheckOutRuleDetails?.effectiveDate ))}" 
                                          />
                                      </div>
                                   </div>
                                    <div class="col-sm-2 mt-4">
                                      <div class="d-flex" >
                                        <div><i class="fas fa-thumbs-up mr-2 mt-1"  [ngClass]="editConfigMaster.earlyCheckOutRuleDetails?.isApproved?'color-bg-green':'color-bg-gray'"></i></div>
                                        <div *ngIf="editConfigMaster.earlyCheckOutRuleDetails?.isApproved">
                                          <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Early Check-out Rules'" >
                                           <i class="fas fa-chevron-circle-down mr-2"></i></a></div>
                                           <div *ngIf=" earlyCheckOutRulesDisabled && !editConfigMaster.earlyCheckOutRuleDetails?.isApproved && rolesArray.includes('CONFIGURATION_MASTER_APPROVAL_WRITE')" title="Click here to Approve or Reject" >
                                            <a class="approve-icon" data-bs-toggle="modal" data-bs-target="#approveRejectModel" (click)="openApproveOrRejectModel('earlyCheckOutRuleDetails',editConfigMaster.earlyCheckOutRuleDetails)">
                                              <i class="far fa-hand-point-up mt-1 mr-2"></i>
                                            </a>
                                          </div> 
                                        <div *ngIf="earlyCheckOutRulesDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')" class="btn-group">
                                          <button class="btn btn-sm btn-outline-secondary" (click)="earlyCheckOutRulesDisabled = false">
                                            <i class="fas fa-edit"></i>
                                          </button>
                                        </div>
                                        <div class="btn-group" *ngIf="!earlyCheckOutRulesDisabled && rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                          <button class="btn btn-sm btn-outline-secondary" (click)="earlyCheckOutRulesSubmit('update')">
                                            <i class="fas fa-check"></i>
                                          </button>
                                          <button class="btn btn-sm btn-outline-secondary" (click)="earlyCheckOutRuleReset()">
                                            <i class="fas fa-redo" style="color: red;"></i>
                                          </button>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="row mt-1" *ngIf="showConfigMaster.earlyCheckOutRuleDetails">
                                    <div class="col-sm-2">
                                      <div class="input-group input-group-sm">
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                          {{ showConfigMaster.earlyCheckOutRuleDetails?.trigger_condition }}
                                        </span>
                                      </div> 
                                     </div>
                                    <div class="col-sm-2">
                                      <div class="input-group input-group-sm">
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 70px !important;">
                                          {{ showConfigMaster.earlyCheckOutRuleDetails?.check_out_day }}
                                        </span>
                                          <span class="input-group-text">Days</span>
                                      </div>
                                    </div>
                                    <div class="col-sm-3">
                                      <div class="input-group input-group-sm" >
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                          {{ showConfigMaster.earlyCheckOutRuleDetails?.trigger_value }}
                                        </span>
                                      </div>
                                      </div>
                                    <div class="col-sm-2">
                                      <div class="input-group input-group-sm">
                                        <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                          {{ showConfigMaster.earlyCheckOutRuleDetails?.effectiveDate }}
                                        </span>
                                      </div>
                                   </div>
                                    <div class="col-sm-2 mt-1">
                                      <div class="d-flex" >
                                        <div><i class="fas fa-thumbs-up mr-2 color-bg-green"></i></div>
                                        <div>
                                          <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='Early Check-out Rules'" >
                                           <i class="fas fa-chevron-circle-down mr-2 mt-1"></i></a></div>
                                        </div>
                                    </div>
                                  </div>
                              </div>
                              
                            </div>
                          
                                <hr class="solid"> 
                                <div>
                                  <!--Auto-Cancellation Period-->
                                  <div class="p-3">
                                    <div>
                                      <div><span style="font-size: 16px;color:#78177e;">After check-in Date </span></div>
                                      <div >
                                        <p class="small text-muted" style="font-size: 12px;">
                                          <em>Configure the number of days after the check-in date to automatically cancel the bookings if tenant fails to check-in. If type is selected as Rent then total days
                                            <a href="javascript:void(0)" *ngIf="!more"  (click)="more=!more">...more</a>
                                            <span *ngIf="more">
                                               stayed rent amount will be deducted. If type is selected as Total Paid Amount then percentage of Total Paid Amount will be deducted. If type is selected as Security Deposit then percentage of Security Deposit Amount is to be deducted.
                                              <a href="javascript:void(0)" (click)="more=!more"><<...less</a>
                                            </span>
                                          </em>
                                        </p>
                                      </div>
                                    </div>
                                    <div>
                                      <div class="row" *ngIf="editConfigMaster.cancellationAfterCheckInDetails">
                                        <div class="col-sm-2">
                                          <div>Condition</div>
                                          <div class="input-group input-group-sm" *ngIf="autoCancellationDisabled">
                                            <input type="text" class="form-control form-control-sm" [(ngModel)]="editConfigMaster.cancellationAfterCheckInDetails.trigger_condition" [disabled]="autoCancellationDisabled" /> 
                                          </div> 
                                          <div class="input-group input-group-sm" *ngIf="!autoCancellationDisabled">
                                            <select class="form-select form-select-sm" [(ngModel)]="editConfigMaster.cancellationAfterCheckInDetails.trigger_condition" [ngClass]="{'is-invalid': !autoCancellationDisabled && (!editConfigMaster.cancellationAfterCheckInDetails.trigger_condition 
                                              ||  (editConfigMaster.cancellationAfterCheckInDetails.auto_cancellation_day == 1 && editConfigMaster.cancellationAfterCheckInDetails.trigger_condition === '<'))}" >
                                              <option *ngFor="let cond of triggerCondition" [value]="cond.cond_name">{{cond.cond_name}}</option>
                                            </select>
                                          </div>
                                         </div>
                                        <div class="col-sm-2">
                                          <div>After check-in</div>
                                          <div class="input-group input-group-sm">
                                            <input 
                                              type="text" 
                                              class="form-control form-control-sm"
                                              [(ngModel)]="editConfigMaster.cancellationAfterCheckInDetails.auto_cancellation_day" [disabled]="autoCancellationDisabled" (keypress)="numberOnly($event)" maxlength="3" 
                                               [ngClass]="{'is-invalid': !autoCancellationDisabled && (isNotValidNumbernAndZero(editConfigMaster.cancellationAfterCheckInDetails.auto_cancellation_day) ||
                                                    (editConfigMaster.cancellationAfterCheckInDetails.auto_cancellation_day == 1 && editConfigMaster.cancellationAfterCheckInDetails.trigger_condition === '<'))}" 
                                              style="max-width: 70px !important;" />
                                              <span class="input-group-text">Days</span>
                                          </div>
                                      
                                          <p class="small text-muted" style="font-size: 12px;">
                                          <em>Set the days to cancel if not checked in.</em>
                                          </p>
                                        </div>
                                        <div class="col-sm-3">
                                          <div>Deduction Type</div>
                                          <div class="input-group input-group-sm">
                                            <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                              {{ editConfigMaster.cancellationAfterCheckInDetails?.trigger_value }}
                                            </span>
                                          </div>
                                        </div>
                                        <div class="col-sm-2">
                                          <div>Effective On</div>
                                          <div class="input-group input-group-sm">
                                            <input 
                                              type="date" 
                                              class="form-control form-control-sm"  [(ngModel)]="editConfigMaster.cancellationAfterCheckInDetails.effectiveDate" [disabled]="autoCancellationDisabled"
                                              [ngClass]="{'is-invalid': !autoCancellationDisabled && (!editConfigMaster.cancellationAfterCheckInDetails?.effectiveDate || invaliedEffectiveDate('cancellationAfterCheckInDetails',editConfigMaster.cancellationAfterCheckInDetails?.effectiveDate ) )}" 
                                              />
                                          </div>
                                       </div> 
                                        <!-- Action Button -->
                                        <div class="col-sm-1 mt-4" *ngIf="rolesArray.includes('CONFIGURATION_MASTER_WRITE')">
                                          <div class="d-flex" >
                                            <div><i class="fas fa-thumbs-up mr-2 mt-1" [ngClass]="editConfigMaster.cancellationAfterCheckInDetails?.isApproved?'color-bg-green':'color-bg-gray'"></i></div>
                                          <div *ngIf="editConfigMaster.cancellationAfterCheckInDetails?.isApproved">
                                            <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='After check-in Date'" >
                                             <i class="fas fa-chevron-circle-down mr-2"></i></a></div>
                                             <div *ngIf=" autoCancellationDisabled && !editConfigMaster.cancellationAfterCheckInDetails?.isApproved && rolesArray.includes('CONFIGURATION_MASTER_APPROVAL_WRITE')" title="Click here to Approve or Reject" >
                                              <a class="approve-icon"  data-bs-toggle="modal" data-bs-target="#approveRejectModel" (click)="openApproveOrRejectModel('cancellationAfterCheckInDetails',editConfigMaster.cancellationAfterCheckInDetails)">
                                                <i class="far fa-hand-point-up mt-1 mr-2"></i>
                                              </a>
                                            </div> 
                                          <div class="btn-group">
                                            <button 
                                              class="btn btn-sm btn-outline-secondary" 
                                              *ngIf="autoCancellationDisabled"
                                              (click)="autoCancellationDisabled = false">
                                              <i class="fas fa-edit"></i>
                                            </button>
                                            <button 
                                              class="btn btn-sm btn-outline-secondary" 
                                              *ngIf="!autoCancellationDisabled"
                                              (click)="autoCancellationSubmit('update')">
                                              <i class="fas fa-check"></i>
                                            </button>
                                            <button 
                                              class="btn btn-sm btn-outline-secondary" 
                                              *ngIf="!autoCancellationDisabled"
                                              (click)="autoCancellationReset()">
                                              <i class="fas fa-redo" style="color: red;"></i>
                                            </button>
                                          </div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="row" *ngIf="showConfigMaster.cancellationAfterCheckInDetails">
                                        <div class="col-sm-2">
                                          <div class="input-group input-group-sm mt-1">
                                            <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                              {{ showConfigMaster.cancellationAfterCheckInDetails?.trigger_condition }}
                                            </span>
                                          </div>
                                         </div>
                                        <div class="col-sm-2">
                                          <div class="input-group input-group-sm mt-1">
                                            <span class="form-control form-control-sm" style="background-color: #eaecf4;max-width: 70px !important;">
                                              {{ showConfigMaster.cancellationAfterCheckInDetails?.auto_cancellation_day }}
                                            </span>
                                              <span class="input-group-text">Days</span>
                                          </div>
                                        </div>
                                        <div class="col-sm-3">
                                          <div class="input-group input-group-sm mt-1">
                                            <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                              {{ showConfigMaster.cancellationAfterCheckInDetails?.trigger_value }}
                                            </span>
                                          </div>
                                        </div>
                                        <div class="col-sm-2">
                                          <div class="input-group input-group-sm">
                                            <span class="form-control form-control-sm" style="background-color: #eaecf4;">
                                              {{ showConfigMaster.cancellationAfterCheckInDetails?.effectiveDate  }}
                                            </span> 
                                          </div>
                                       </div>
                                        <!-- Action Button -->
                                        <div class="col-sm-1" *ngIf="rolesArray.includes('CONFIGURATION_MASTER_READ')">
                                          <div class="d-flex" >
                                          <div><i class="fas fa-thumbs-up mt-1" style="color:rgb(153, 243, 94) !important"></i></div>
                                          <div>
                                            <a class="more-icon" data-bs-toggle="modal" data-bs-target="#popupMoreRecord" (click)="popupMoreRecordHeader='After check-in Date'" >
                                             <i class="fas fa-chevron-circle-down ml-2 mt-1"></i></a></div>
                                        </div>
                                      </div>
                                      </div>
                                    </div>
                                     
                                  </div>
                                  
                                </div>
                                                  
                       </div>
                        
                       
                  </div>
                <!-- /.container-fluid -->
                  </div>
              </div>
            <!-- End of Main Content -->
        </div>
        <!-- End of Content Wrapper -->
   </div>
  <!-- End of Page Wrapper -->
</div>

<div class="modal fade" id="popupMoreRecord" tabindex="-1" role="dialog" data-bs-backdrop="static" aria-labelledby="exampleModalLongTitle" aria-hidden="true" data-whatever="@mdo">
  <div class="modal-dialog modal-fullscreen-sm-down modal-dialog-scrollable modal-xl">
    <div class="modal-content" style="text-align: center;">
      <div class="modal-header bg-gradiant-popup-header">
        <h5 class="modal-title" id="formtitle">{{popupMoreRecordHeader}} History </h5>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close"  #closeModel>
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      <div class="m-2">
        <div *ngIf="popupMoreRecordHeader === 'Token Advance'">

          <div class="d-flex rule-header mb-2">
            <div style="min-width: 100px;">Fixed amount</div>
            <div class="ms-3" style="min-width: 160px;">% of Security Deposit</div>
            <div class="ms-3" style="min-width: 100px;">Effective On</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
            <div class="ms-3" style="min-width: 250px;">Approved By</div>
          </div>
        
          <hr />
        
          <div *ngFor="let tokenDetails of configMasterModel.tokenDetails">
            <div class="d-flex rule-data" *ngIf="!(!tokenDetails.isApproved && !tokenDetails.comments)">
              <div style="min-width: 100px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span> {{ tokenDetails.fixedToken }} </span>
              </div>
              <div class="ms-3" style="min-width: 160px;">{{ tokenDetails.variableToken }} %</div>
              <div class="ms-3" style="min-width: 100px;">{{ tokenDetails.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ tokenDetails.createdBy }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ tokenDetails.approvedBy }}</div>
              <div class="ms-3" style="min-width: 10px;" [title]="tokenDetails.comments ? 'Rejected':'Approved'" >
                <i [ngClass]="tokenDetails.comments ? 'fas fa-thumbs-down color-bg-red':'fas fa-thumbs-up color-bg-green'"></i>
              </div>
              <div class="ms-3 pr-3 text-break" style="min-width: fit-content;">
                <p>{{tokenDetails.comments}}</p>
              </div>

            </div>
          </div>
        </div>
        <div *ngIf="popupMoreRecordHeader === 'Security Deposit Limits'">
  
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 160px;">Minimum Deposit</div>
            <div class="ms-3" style="min-width: 160px;">Maximum Deposit</div>
            <div class="ms-3" style="min-width: 100px;">Effective On</div>
            <div class="ms-3 text-break" style="min-width: 250px;">Created By</div>
            <div class="ms-3 text-break" style="min-width: 250px;">Approved By</div>
          </div>
        
          <hr />
      
          <div *ngFor="let depositDetails of configMasterModel.depositDetails">
            <div class="d-flex rule-data" *ngIf="!(!depositDetails.isApproved && !depositDetails.comments)">
              <div style="min-width: 160px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span> {{ depositDetails.minimumDeposit }}</span>
              </div>
              <div class="ms-3" style="min-width: 160px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span> {{ depositDetails.maximumDeposit }}</span>
              </div>
              <div class="ms-3" style="min-width: 100px;">{{ depositDetails.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ depositDetails.createdBy }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ depositDetails.approvedBy }}</div>
              <div class="ms-3" style="min-width: 10px;">
                <i [ngClass]="depositDetails.comments ? 'fas fa-thumbs-down color-bg-red':'fas fa-thumbs-up color-bg-green'"></i>
              </div>
              <div class="ms-3 pr-3 text-break" style="min-width: fit-content;">
                <p>{{depositDetails.comments}}</p>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="popupMoreRecordHeader === 'GST Charges'">
  
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 140px;">Monthly Rent</div>
            <div class="ms-3" style="min-width: 80px;">CGST</div>
            <div class="ms-3" style="min-width: 80px;">SGST</div>
            <div class="ms-3" style="min-width: 80px;">IGST</div>
            <div class="ms-3" style="min-width: 100px;">Effective On</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
            <div class="ms-3" style="min-width: 250px;">Approved By</div>
          </div>
        
          <hr />
        
          <div *ngFor="let gstDetail of configMasterModel.gstCharges">
            <div class="d-flex rule-data" *ngIf="!(!gstDetail.isApproved && !gstDetail.comments)">
              <div style="min-width: 140px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span> {{ gstDetail.monthlyRent }} </span>
              </div>
              <div class="ms-3" style="min-width: 80px;">{{ gstDetail.cgstPercentage }}%</div>
              <div class="ms-3" style="min-width: 80px;">{{ gstDetail.sgstPercentage }}%</div>
              <div class="ms-3" style="min-width: 80px;">{{ gstDetail.igstPercentage }}%</div>
              <div class="ms-3" style="min-width: 100px;">{{ gstDetail.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ gstDetail.createdBy }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;"> {{ gstDetail.approvedBy }}</div>
              <div class="ms-3" style="min-width: 10px;" [title]="gstDetail.comments ? 'Rejected':'Approved'" >
                <i [ngClass]="gstDetail.comments ? 'fas fa-thumbs-down color-bg-red':'fas fa-thumbs-up color-bg-green'"></i>
              </div>
              <div class="ms-3 pr-3 text-break" style="min-width: fit-content;">
                <p>{{gstDetail.comments}}</p>
              </div>
            </div>
          </div>
        </div>
        

        <div *ngIf="popupMoreRecordHeader === 'Service Charges'">

          <div class="d-flex mb-2">
            <div style="min-width: 200px; text-align: center; border-bottom: 2px solid gray; color: #000;">
              eKYC Charges
            </div>
            <div class="ms-3" style="min-width: 300px; text-align: center; border-bottom: 2px solid gray; color: #000;">
              Documentation Charges
            </div>
          </div>
        
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 100px;">Owners</div>
            <div class="ms-3" style="min-width: 100px;">Tenants</div>
            <div class="ms-3" style="min-width: 160px;">Owners</div>
            <div class="ms-3" style="min-width: 100px;">Tenants</div>
            <div class="ms-3" style="min-width: 120px;">Effective Date</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
            <div class="ms-3" style="min-width: 250px;">Approved By</div>
            <div class="ms-3" style="min-width: 30px;"></div>
          </div>
        
          <hr />
        
          <div *ngFor="let otherCharges of configMasterModel.otherCharges">
            <div class="d-flex rule-data" *ngIf="!(!otherCharges.isApproved && !otherCharges.comments)">
              <div style="min-width: 100px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span>{{ otherCharges.ownerEkycCharges }}</span>
              </div>
              <div class="ms-3" style="min-width: 100px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span>{{ otherCharges.tenantEkycCharges }}</span>
              </div>
              <div class="ms-3" style="min-width: 160px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span>{{ otherCharges.ownerDocumentCharges }}</span>
              </div>
              <div class="ms-3" style="min-width: 100px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span>{{ otherCharges.tenantDocumentCharges }}</span>
              </div>
              <div class="ms-3" style="min-width: 120px;">{{ otherCharges.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ otherCharges.createdBy }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">
                {{ otherCharges.approvedBy }}
              </div>
                <div class="ms-3" style="min-width: 10px;" [title]="otherCharges.comments ? 'Rejected':'Approved'" >
                <i [ngClass]="otherCharges.comments ? 'fas fa-thumbs-down color-bg-red':'fas fa-thumbs-up color-bg-green'"></i>
              </div>
              <div class="ms-3 pr-3 text-break" style="min-width: fit-content;">
                <p>{{otherCharges.comments}}</p>
              </div>
            </div>
          </div>
        
        </div>
        
        <div *ngIf="popupMoreRecordHeader === 'Data Grouping'">

          <div class="d-flex rule-header mb-2">
            <div style="min-width: 100px;">Days</div>
            <div class="ms-3" style="min-width: 100px;">Effective Date</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
            <div class="ms-3" style="min-width: 250px;">Approved By</div>
          </div>
        
          <hr />
        
          <div *ngFor="let dataGrouping of configMasterModel.dataGrouping">
            <div class="d-flex rule-data" *ngIf="!(!dataGrouping.isApproved && !dataGrouping.comments)">
              <div style="min-width: 100px;">{{ dataGrouping.considerDays }} Days</div>
              <div class="ms-3" style="min-width: 100px;">{{ dataGrouping.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ dataGrouping.createdBy }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ dataGrouping.approvedBy }}</div>
              <div class="ms-3" style="min-width: 10px;" [title]="dataGrouping.comments ? 'Rejected':'Approved'" >
                <i [ngClass]="dataGrouping.comments ? 'fas fa-thumbs-down color-bg-red':'fas fa-thumbs-up color-bg-green'"></i>
              </div>
              <div class="ms-3 pr-3 text-break" style="min-width: fit-content;">
                <p>{{dataGrouping.comments}}</p>
              </div>
            </div>
          </div>
          
        </div>
        
        <div *ngIf="popupMoreRecordHeader === 'Force Checkout'">
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 150px;">Days</div>
            <div class="ms-3" style="min-width: 150px;">Effective Date</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
            <div class="ms-3" style="min-width: 250px;">Approved By</div>
          </div>
        
          <hr />
        
          <div *ngFor="let forceCheckOut of configMasterModel.forceCheckOut">
            <div class="d-flex rule-data" *ngIf="!(!forceCheckOut.isApproved && !forceCheckOut.comments)">
              <div style="min-width: 150px;">{{ forceCheckOut.forceCheckOutDays }} Days</div>
              <div class="ms-3" style="min-width: 150px;">{{ forceCheckOut.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ forceCheckOut.createdBy }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ forceCheckOut.approvedBy }}</div>
              <div class="ms-3" style="min-width: 10px;" [title]="forceCheckOut.comments ? 'Rejected':'Approved'" >
                <i [ngClass]="forceCheckOut.comments ? 'fas fa-thumbs-down color-bg-red':'fas fa-thumbs-up color-bg-green'"></i>
              </div>
              <div class="ms-3 pr-3 text-break" style="min-width: fit-content;">
                <p>{{forceCheckOut.comments}}</p>
              </div>
            </div>
          </div>
        </div>
        
        <div *ngIf="popupMoreRecordHeader === 'No Rental agreement'">
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 200px;">No Rental agreement upto</div>
            <div class="ms-3" style="min-width: 150px;">Effective Date</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
            <div class="ms-3" style="min-width: 250px;">Approved By</div>
          </div>
        
          <hr />
        
          <div *ngFor="let noRentalAgreement of configMasterModel.noRentalAgreement">
            <div class="d-flex rule-data" *ngIf="!(!noRentalAgreement.isApproved && !noRentalAgreement.comments)">
              <div style="min-width: 200px;">{{ noRentalAgreement.noRentalAgreementDays }} Days</div>
              <div class="ms-3" style="min-width: 150px;">{{ noRentalAgreement.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ noRentalAgreement.createdBy }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ noRentalAgreement.approvedBy }}</div>
              <div class="ms-3" style="min-width: 10px;" [title]="noRentalAgreement.comments ? 'Rejected':'Approved'" >
                <i [ngClass]="noRentalAgreement.comments ? 'fas fa-thumbs-down color-bg-red':'fas fa-thumbs-up color-bg-green'"></i>
              </div>
              <div class="ms-3 pr-3 text-break" style="min-width: fit-content;">
                <p>{{noRentalAgreement.comments}}</p>
              </div>
            </div>
          </div>
        </div>
        
        <div *ngIf="popupMoreRecordHeader === 'Security Deposit Deadline'">
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 100px;">Condition</div>
            <div class="ms-3" style="min-width: 160px;">Before check-in</div>
            <div class="ms-3" style="min-width: 160px;">Deduction Type</div>
            <div class="ms-3" style="min-width: 100px;">Deduction</div>
            <div class="ms-3" style="min-width: 120px;">Effective On</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
            <div class="ms-3" style="min-width: 250px;">Approved By</div>
          </div>
        
          <hr />
        
          <div *ngFor="let securityDepositDeadLineDetails of configMasterModel.securityDepositDeadLineDetails">
            <div class="d-flex rule-data" *ngIf="!(!securityDepositDeadLineDetails.isApproved && !securityDepositDeadLineDetails.comments)">
              <div style="min-width: 100px;">{{ securityDepositDeadLineDetails.trigger_condition }}</div>
              <div class="ms-3" style="min-width: 160px;">{{ securityDepositDeadLineDetails.auto_cancellation_day }} Days</div>
              <div class="ms-3" style="min-width: 160px;">{{ securityDepositDeadLineDetails.trigger_value }}</div>
              <div class="ms-3" style="min-width: 100px;">{{ securityDepositDeadLineDetails.deduction_percentage }}%</div>
              <div class="ms-3" style="min-width: 120px;">{{ securityDepositDeadLineDetails.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ securityDepositDeadLineDetails.createdBy }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ securityDepositDeadLineDetails.approvedBy }}</div>
              <div class="ms-3" style="min-width: 10px;" [title]="securityDepositDeadLineDetails.comments ? 'Rejected':'Approved'" >
                <i [ngClass]="securityDepositDeadLineDetails.comments ? 'fas fa-thumbs-down color-bg-red':'fas fa-thumbs-up color-bg-green'"></i>
              </div>
              <div class="ms-3 pr-3 text-break" style="min-width: fit-content;">
                <p>{{securityDepositDeadLineDetails.comments}}</p>
              </div>
            </div>
          </div>
        </div>
        
        <div *ngIf="popupMoreRecordHeader === 'Early Check-out Rules'">
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 100px;">Condition</div>
            <div class="ms-3" style="min-width: 120px;">Eligibility</div>
            <div class="ms-3" style="min-width: 180px;">Deduction Type</div>
            <div class="ms-3" style="min-width: 120px;">Effective On</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
            <div class="ms-3" style="min-width: 250px;">Approved By</div>
          </div>
        
          <hr />
        
          <div *ngFor="let earlyCheckOutRuleDetails of configMasterModel.earlyCheckOutRuleDetails">
            <div class="d-flex rule-data" *ngIf="!(!earlyCheckOutRuleDetails.isApproved && !earlyCheckOutRuleDetails.comments)">
              <div style="min-width: 100px;">{{ earlyCheckOutRuleDetails.trigger_condition }}</div>
              <div class="ms-3" style="min-width: 120px;">{{ earlyCheckOutRuleDetails.check_out_day }} Days</div>
              <div class="ms-3" style="min-width: 180px;">{{ earlyCheckOutRuleDetails.trigger_value }}</div>
              <div class="ms-3" style="min-width: 120px;">{{ earlyCheckOutRuleDetails.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ earlyCheckOutRuleDetails.createdBy }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ earlyCheckOutRuleDetails.approvedBy }}</div>
              <div class="ms-3" style="min-width: 10px;" [title]="earlyCheckOutRuleDetails.comments ? 'Rejected':'Approved'" >
                <i [ngClass]="earlyCheckOutRuleDetails.comments ? 'fas fa-thumbs-down color-bg-red':'fas fa-thumbs-up color-bg-green'"></i>
              </div>
              <div class="ms-3 pr-3 text-break" style="min-width: fit-content;">
                <p>{{earlyCheckOutRuleDetails.comments}}</p>
              </div>
            </div>
          </div>
        </div>
        
        <div *ngIf="popupMoreRecordHeader === 'After check-in Date'">
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 100px;">Condition</div>
            <div class="ms-3" style="min-width: 160px;">After check-in</div>
            <div class="ms-3" style="min-width: 180px;">Deduction Type</div>
            <div class="ms-3" style="min-width: 120px;">Effective On</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
            <div class="ms-3" style="min-width: 250px;">Approved By</div>
          </div>
        
          <hr />
        
          <div *ngFor="let cancellationAfterCheckInDetails of configMasterModel.cancellationAfterCheckInDetails">
            <div class="d-flex rule-data" *ngIf="!(!cancellationAfterCheckInDetails.isApproved && !cancellationAfterCheckInDetails.comments)">
              <div style="min-width: 100px;">{{ cancellationAfterCheckInDetails.trigger_condition }}</div>
              <div class="ms-3" style="min-width: 160px;">{{ cancellationAfterCheckInDetails.auto_cancellation_day }} Days</div>
              <div class="ms-3" style="min-width: 180px;">{{ cancellationAfterCheckInDetails.trigger_value }}</div>
              <div class="ms-3" style="min-width: 120px;">{{ cancellationAfterCheckInDetails.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ cancellationAfterCheckInDetails.createdBy }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ cancellationAfterCheckInDetails.approvedBy }} </div>
              <div class="ms-3" style="min-width: 10px;" [title]="cancellationAfterCheckInDetails.comments ? 'Rejected':'Approved'" >
                <i [ngClass]="cancellationAfterCheckInDetails.comments ? 'fas fa-thumbs-down color-bg-red':'fas fa-thumbs-up color-bg-green'"></i>
              </div>
              <div class="ms-3 pr-3 text-break" style="min-width: fit-content;">
                <p>{{cancellationAfterCheckInDetails.comments}}</p>
              </div>
            </div>
          </div>
        </div>
        
        <div *ngIf="popupMoreRecordHeader === 'Cancellation And Refund Policy'">  
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 100px;">Priority</div>
            <div class="ms-3" style="min-width: 120px;">Condition</div>
            <div class="ms-3" style="min-width: 140px;">Eligibility</div>
            <div class="ms-3" style="min-width: 200px;">Deduction Type</div>
            <div class="ms-3" style="min-width: 120px;">Deduction</div>
          </div>
        
          <hr />
        
          <div *ngFor="let mainCRP of cancellationBeforeCheckInDetailsOrg">
            <div class="card p-3 mt-2" *ngIf="!(!mainCRP.isApproved && !mainCRP.comments)">
              <div class="mb-2 text-break" style="color:#6610f2;">
                Created By: {{ mainCRP.createdBy }},
                Approved By: {{ mainCRP.approvedBy }},
                Effective from: {{ mainCRP.effectiveDate }}
                <div class="ms-3" style="min-width: 10px;" [title]="mainCRP.comments ? 'Rejected':'Approved'" >
                  <i [ngClass]="mainCRP.comments ? 'fas fa-thumbs-down color-bg-red':'fas fa-thumbs-up color-bg-green'"></i>
                </div>
                <div class="ms-3 pr-3 text-break" style="min-width: fit-content;color: red !important;">
                  <p>{{mainCRP.comments}}</p>
                </div>
              </div>
        
              <div *ngFor="let crf of mainCRP.zoy_before_check_in_cancellation_info" class="d-flex rule-data">
                <div style="min-width: 100px;">{{ crf.priority }}</div>
                <div class="ms-3" style="min-width: 120px;">{{ crf.trigger_condition }}</div>
                <div class="ms-3" style="min-width: 140px;">{{ crf.before_checkin_days }} Days</div>
                <div class="ms-3" style="min-width: 200px;">{{ crf.trigger_value }}</div>
                <div class="ms-3" style="min-width: 120px;">{{ crf.deduction_percentage }}%</div>
              </div>
            </div>
          </div>
        </div>
        
        <div *ngIf="popupMoreRecordHeader === 'Short Term Duration Details'">  
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 160px;">Start Day</div>
            <div class="ms-3" style="min-width: 100px;">End Day</div>
            <div class="ms-3" style="min-width: 120px;">Percentage</div>
          </div>
        
          <hr />
        
          <div *ngFor="let mainSTD of shortTermDataMainList">
            <div class="card p-3 mt-2" *ngIf="!(!mainSTD.isApproved && !mainSTD.comments)">
              <div class="mb-2 text-break" style="color:#6610f2;">
                Created By: {{ mainSTD.createdBy }},
                Approved By: {{ mainSTD.approvedBy }},
                Effective from: {{ mainSTD.effectiveDate }}
                <div class="ms-3" style="min-width: 10px;" [title]="mainSTD.comments ? 'Rejected':'Approved'" >
                  <i [ngClass]="mainSTD.comments ? 'fas fa-thumbs-down color-bg-red':'fas fa-thumbs-up color-bg-green'"></i>
                </div>
                <div class="ms-3 pr-3 text-break" style="min-width: fit-content;color: red !important;">
                  <p>{{mainSTD.comments}}</p>
                </div>
              </div>
        
              <div *ngFor="let std of mainSTD.zoy_short_term_dto_info" class="d-flex rule-data">
                <div style="min-width: 160px;">{{ std.start_day }}</div>
                <div class="ms-3" style="min-width: 100px;">{{ std.end_day }}</div>
                <div class="ms-3" style="min-width: 120px;">{{ std.percentage }}%</div>
              </div>
            </div>
          </div>
        </div>
        
      </div>
    </div>
    </div>
  </div>
</div>



<div class="modal fade" id="approveRejectModel" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true" data-bs-backdrop="static">
  <div class="modal-dialog modal-dialog-scrollable modal-xl ">
    <div class="modal-content">
      <div class="modal-header bg-gradiant-popup-header">
        <h5 class="modal-title" id="modalLabel"><span> Are you going to approve or reject the {{approveOrRejectRule}} ?</span></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" #closeApproveRejectModel ></button>
      </div>
      <div class="modal-body p-3">

        <div *ngIf="key === 'tokenDetails'">
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 160px;">Fixed Amount</div>
            <div class="ms-3" style="min-width: 160px;">% of Security Deposit</div>
            <div class="ms-3" style="min-width: 100px;">Effective Date</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
          </div>
        
          <hr />
        
          <div class="d-flex rule-data">
            <div style="min-width: 160px;">
              <i class="fas fa-rupee-sign" style="font-size: small;"></i>
              <span>{{ editConfigMaster.tokenDetails.fixedToken }}</span>
            </div>
            <div class="ms-3" style="min-width: 160px;">{{ editConfigMaster.tokenDetails.variableToken }} %</div>
            <div class="ms-3" style="min-width: 100px;">{{ editConfigMaster.tokenDetails.effectiveDate }}</div>
            <div class="ms-3 text-break" style="min-width: 250px;">{{ editConfigMaster.tokenDetails.createdBy }}</div>
          </div>
        </div>

        <div *ngIf="key === 'depositDetails'">
  
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 160px;">Minimum Deposit</div>
            <div class="ms-3" style="min-width: 160px;">Maximum Deposit</div>
            <div class="ms-3" style="min-width: 100px;">Effective On</div>
            <div class="ms-3 text-break" style="min-width: 250px;">Created By</div>
          </div>
        
          <hr />
      
            <div class="d-flex rule-data" >
              <div style="min-width: 160px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span> {{ editConfigMaster.depositDetails.minimumDeposit }}</span>
              </div>
              <div class="ms-3" style="min-width: 160px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span> {{ editConfigMaster.depositDetails.maximumDeposit }}</span>
              </div>
              <div class="ms-3" style="min-width: 100px;">{{ editConfigMaster.depositDetails.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ editConfigMaster.depositDetails.createdBy }}</div>
          </div>
        </div>

        <div *ngIf="key === 'gstCharges'">
  
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 140px;">Monthly Rent</div>
            <div class="ms-3" style="min-width: 80px;">CGST</div>
            <div class="ms-3" style="min-width: 80px;">SGST</div>
            <div class="ms-3" style="min-width: 80px;">IGST</div>
            <div class="ms-3" style="min-width: 100px;">Effective On</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
          </div>
        
          <hr />
        
            <div class="d-flex rule-data">
              <div style="min-width: 140px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span> {{ editConfigMaster.gstCharges.monthlyRent }} </span>
              </div>
              <div class="ms-3" style="min-width: 80px;">{{ editConfigMaster.gstCharges.cgstPercentage }}%</div>
              <div class="ms-3" style="min-width: 80px;">{{ editConfigMaster.gstCharges.sgstPercentage }}%</div>
              <div class="ms-3" style="min-width: 80px;">{{ editConfigMaster.gstCharges.igstPercentage }}%</div>
              <div class="ms-3" style="min-width: 100px;">{{ editConfigMaster.gstCharges.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ editConfigMaster.gstCharges.createdBy }}</div>
          </div>
        </div>
        

        <div *ngIf="key === 'otherCharges'">

          <div class="d-flex mb-2">
            <div style="min-width: 200px; text-align: center; border-bottom: 2px solid gray; color: #000;">
              eKYC Charges
            </div>
            <div class="ms-3" style="min-width: 300px; text-align: center; border-bottom: 2px solid gray; color: #000;">
              Documentation Charges
            </div>
          </div>
        
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 100px;">Owners</div>
            <div class="ms-3" style="min-width: 100px;">Tenants</div>
            <div class="ms-3" style="min-width: 160px;">Owners</div>
            <div class="ms-3" style="min-width: 100px;">Tenants</div>
            <div class="ms-3" style="min-width: 120px;">Effective Date</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
          </div>
        
          <hr />
        
            <div class="d-flex rule-data">
              <div style="min-width: 100px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span>{{ editConfigMaster.otherCharges.ownerEkycCharges }}</span>
              </div>
              <div class="ms-3" style="min-width: 100px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span>{{ editConfigMaster.otherCharges.tenantEkycCharges }}</span>
              </div>
              <div class="ms-3" style="min-width: 160px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span>{{ editConfigMaster.otherCharges.ownerDocumentCharges }}</span>
              </div>
              <div class="ms-3" style="min-width: 100px;">
                <i class="fas fa-rupee-sign" style="font-size: small;"></i>
                <span>{{ editConfigMaster.otherCharges.tenantDocumentCharges }}</span>
              </div>
              <div class="ms-3" style="min-width: 120px;">{{ editConfigMaster.otherCharges.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ editConfigMaster.otherCharges.createdBy }}</div>
          </div>
        
        </div>
        
        <div *ngIf="key === 'dataGrouping'">

          <div class="d-flex rule-header mb-2">
            <div style="min-width: 100px;">Days</div>
            <div class="ms-3" style="min-width: 100px;">Effective Date</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
          </div>
        
          <hr />
        
            <div class="d-flex rule-data">
              <div style="min-width: 100px;">{{ editConfigMaster.dataGrouping.considerDays }} Days</div>
              <div class="ms-3" style="min-width: 100px;">{{ editConfigMaster.dataGrouping.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ editConfigMaster.dataGrouping.createdBy }}</div>
          </div>
          
        </div>
        
        <div *ngIf="key === 'forceCheckOut'">
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 150px;">Days</div>
            <div class="ms-3" style="min-width: 150px;">Effective Date</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
          </div>
        
          <hr />
        
            <div class="d-flex rule-data">
              <div style="min-width: 150px;">{{ editConfigMaster.forceCheckOut.forceCheckOutDays }} Days</div>
              <div class="ms-3" style="min-width: 150px;">{{ editConfigMaster.forceCheckOut.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ editConfigMaster.forceCheckOut.createdBy }}</div>
          </div>
        </div>
        
        <div *ngIf="key === 'noRentalAgreement'">
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 200px;">No Rental agreement upto</div>
            <div class="ms-3" style="min-width: 150px;">Effective Date</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
          </div>
        
          <hr />
        
            <div class="d-flex rule-data">
              <div style="min-width: 200px;">{{ editConfigMaster.noRentalAgreement.noRentalAgreementDays }} Days</div>
              <div class="ms-3" style="min-width: 150px;">{{ editConfigMaster.noRentalAgreement.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ editConfigMaster.noRentalAgreement.createdBy }}</div>
          </div>
        </div>
        
        <div *ngIf="key === 'securityDepositDeadLineDetails'">
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 100px;">Condition</div>
            <div class="ms-3" style="min-width: 160px;">Before check-in</div>
            <div class="ms-3" style="min-width: 160px;">Deduction Type</div>
            <div class="ms-3" style="min-width: 100px;">Deduction</div>
            <div class="ms-3" style="min-width: 120px;">Effective On</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
          </div>
        
          <hr />
        
            <div class="d-flex rule-data">
              <div style="min-width: 100px;">{{ editConfigMaster.securityDepositDeadLineDetails.trigger_condition }}</div>
              <div class="ms-3" style="min-width: 160px;">{{ editConfigMaster.securityDepositDeadLineDetails.auto_cancellation_day }} Days</div>
              <div class="ms-3" style="min-width: 160px;">{{ editConfigMaster.securityDepositDeadLineDetails.trigger_value }}</div>
              <div class="ms-3" style="min-width: 100px;">{{ editConfigMaster.securityDepositDeadLineDetails.deduction_percentage }}%</div>
              <div class="ms-3" style="min-width: 120px;">{{ editConfigMaster.securityDepositDeadLineDetails.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{editConfigMaster.securityDepositDeadLineDetails.createdBy }}</div>
          </div>
        </div>
        
        <div *ngIf="key === 'earlyCheckOutRuleDetails'">
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 100px;">Condition</div>
            <div class="ms-3" style="min-width: 120px;">Eligibility</div>
            <div class="ms-3" style="min-width: 180px;">Deduction Type</div>
            <div class="ms-3" style="min-width: 120px;">Effective On</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
          </div>
        
          <hr />

            <div class="d-flex rule-data">
              <div style="min-width: 100px;">{{ editConfigMaster.earlyCheckOutRuleDetails.trigger_condition }}</div>
              <div class="ms-3" style="min-width: 120px;">{{ editConfigMaster.earlyCheckOutRuleDetails.check_out_day }} Days</div>
              <div class="ms-3" style="min-width: 180px;">{{ editConfigMaster.earlyCheckOutRuleDetails.trigger_value }}</div>
              <div class="ms-3" style="min-width: 120px;">{{ editConfigMaster.earlyCheckOutRuleDetails.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ editConfigMaster.earlyCheckOutRuleDetails.createdBy }}</div>
          </div>
        </div>
        
        <div *ngIf="key === 'cancellationAfterCheckInDetails'">
          <div class="d-flex rule-header mb-2">
            <div style="min-width: 100px;">Condition</div>
            <div class="ms-3" style="min-width: 160px;">After check-in</div>
            <div class="ms-3" style="min-width: 180px;">Deduction Type</div>
            <div class="ms-3" style="min-width: 120px;">Effective On</div>
            <div class="ms-3" style="min-width: 250px;">Created By</div>
          </div>
        
          <hr />
        
            <div class="d-flex rule-data">
              <div style="min-width: 100px;">{{ editConfigMaster.cancellationAfterCheckInDetails.trigger_condition }}</div>
              <div class="ms-3" style="min-width: 160px;">{{ editConfigMaster.cancellationAfterCheckInDetails.auto_cancellation_day }} Days</div>
              <div class="ms-3" style="min-width: 180px;">{{ editConfigMaster.cancellationAfterCheckInDetails.trigger_value }}</div>
              <div class="ms-3" style="min-width: 120px;">{{ editConfigMaster.cancellationAfterCheckInDetails.effectiveDate }}</div>
              <div class="ms-3 text-break" style="min-width: 250px;">{{ editConfigMaster.cancellationAfterCheckInDetails.createdBy }}</div>
          </div>
        </div>

        <div *ngIf="key === 'beforeCheckInCancellationRefundMainObjModel'">  
          <div class="d-flex rule-header">
            <div style="min-width: 100px;">Priority</div>
            <div class="ms-3" style="min-width: 120px;">Condition</div>
            <div class="ms-3" style="min-width: 140px;">Eligibility</div>
            <div class="ms-3" style="min-width: 200px;">Deduction Type</div>
            <div class="ms-3" style="min-width: 120px;">Deduction</div>
          </div>
        
          <hr />
        
            <div>
              <div class="mb-2 text-break" style="color:#6610f2;">
                Created By: {{ editConfigMaster.beforeCheckInCancellationRefundMainObjModel.createdBy }},
                Effective from: {{ editConfigMaster.beforeCheckInCancellationRefundMainObjModel.effectiveDate }}
              </div>
        
              <div *ngFor="let crf of editConfigMaster.beforeCheckInCancellationRefundMainObjModel.zoy_before_check_in_cancellation_info" class="d-flex rule-data">
                <div style="min-width: 100px;">{{ crf.priority }}</div>
                <div class="ms-3" style="min-width: 120px;">{{ crf.trigger_condition }}</div>
                <div class="ms-3" style="min-width: 140px;">{{ crf.before_checkin_days }} Days</div>
                <div class="ms-3" style="min-width: 200px;">{{ crf.trigger_value }}</div>
                <div class="ms-3" style="min-width: 120px;">{{ crf.deduction_percentage }}%</div>
              </div>
          </div>
        </div>
        
        <div *ngIf="key === 'shortTermMainModel'">  
          <div class="d-flex rule-header">
            <div style="min-width: 160px;">Start Day</div>
            <div class="ms-3" style="min-width: 100px;">End Day</div>
            <div class="ms-3" style="min-width: 120px;">Percentage</div>
          </div>
        
          <hr />
        
            <div>
              <div class="mb-2 text-break" style="color:#6610f2;">
                Created By: {{ editConfigMaster.shortTermMainModel.createdBy }},
                Effective from: {{ editConfigMaster.shortTermMainModel.effectiveDate }}
              </div>
        
              <div *ngFor="let std of editConfigMaster.shortTermMainModel.zoy_short_term_dto_info" class="d-flex rule-data">
                <div style="min-width: 160px;">{{ std.start_day }}</div>
                <div class="ms-3" style="min-width: 100px;">{{ std.end_day }}</div>
                <div class="ms-3" style="min-width: 120px;">{{ std.percentage }}%</div>
              </div>
            </div>
        </div>
     
        <br>
        
        <div style="color: #000;">Comments : </div>
        <textarea id="txtArea" class="form-control form-control-sm " rows="5" cols="100" [(ngModel)]="comments" maxlength="1000" title="Please give me the comments"
               [ngClass]="{'is-invalid': submitted && !comments && task=='reject'}"></textarea>
        <div style="color: red;">
          If reject, then comments is required.   
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-dark me-2"  (click)="isApproveOrReject('reject')"  >Reject</button>
        <button type="submit" class="btn btn-primary-custom me-2" (click)="isApproveOrReject('approve')" >Approve</button>
      </div>
    </div>
  </div>
</div>